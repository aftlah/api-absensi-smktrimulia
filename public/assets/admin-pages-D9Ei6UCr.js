import{j as e}from"./query-vendor-CL32O2jR.js";import{r,u as xe,a as ge,R as Q}from"./router-vendor-CjMceo_z.js";import{S as A}from"./ui-vendor-DAzBgmXi.js";import{a as Se,u as ie,w as Le,r as Ce}from"./utils-vendor-BmMXCZbk.js";const Ia={required:a=>!a||typeof a=="string"&&a.trim()===""?"Field ini wajib diisi":null,email:a=>a?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a)?null:"Format email tidak valid":null,minLength:a=>s=>s&&s.length<a?`Minimal ${a} karakter`:null,maxLength:a=>s=>s&&s.length>a?`Maksimal ${a} karakter`:null,numeric:a=>a&&isNaN(a)?"Harus berupa angka":null,phone:a=>a?/^(\+62|62|0)[0-9]{9,13}$/.test(a.replace(/\s/g,""))?null:"Format nomor telepon tidak valid":null,nis:a=>a?/^\d{8,12}$/.test(a)?null:"NIS harus 8-12 digit angka":null,password:a=>a&&a.length<6?"Password minimal 6 karakter":null,confirmPassword:a=>s=>s&&s!==a?"Konfirmasi password tidak cocok":null},Da=(a,s)=>{const t={};return Object.keys(s).forEach(o=>{const l=Array.isArray(s[o])?s[o]:[s[o]],m=a[o];for(const p of l){const c=p(m);if(c){t[o]=c;break}}}),{isValid:Object.keys(t).length===0,errors:t}},Pa=(a,s={})=>{const{maxSize:t=5*1024*1024,allowedTypes:o=["image/jpeg","image/png","image/jpg","application/pdf"],required:l=!1}=s;return a?a.size>t?`Ukuran file maksimal ${Math.round(t/1024/1024)}MB`:o.includes(a.type)?null:`Tipe file tidak didukung. Gunakan: ${o.join(", ")}`:l?"File wajib dipilih":null},pe=(a,s)=>{const t=[];return()=>{const o=Date.now();for(;t.length>0&&t[0]<=o-s;)t.shift();return t.length>=a?!1:(t.push(o),!0)}},Me="/api",Ae=pe("5","60000"),_e=pe("100","60000"),h=Se.create({baseURL:Me,timeout:3e4,withCredentials:!0,headers:{Accept:"application/json","Content-Type":"application/json"}});h.interceptors.request.use(a=>{const s=a.url?.includes("/login");return(s?Ae():_e())?(a.data instanceof FormData&&delete a.headers["Content-Type"],a.metadata={startTime:new Date},a):Promise.reject({response:{status:429,data:{responseMessage:s?"Terlalu banyak percobaan login. Coba lagi dalam 1 menit.":"Terlalu banyak permintaan. Coba lagi nanti."}}})},a=>Promise.reject(a));h.interceptors.response.use(a=>a,a=>{const s=a.response?.status,t=a.config?.url||"";return s===401&&!t.endsWith("/login")&&!t.endsWith("/me")?window.location.href="/login":s===403?console.warn("Access denied:",a.response?.data?.responseMessage):s===429?console.warn("Rate limit exceeded"):s>=500?console.error("Server error:",a.response?.data):s||console.error("Network error - check your connection"),Promise.reject(a)});const Ie=(a,s=null)=>{const t=a.response?.status,l={400:"Permintaan tidak valid",401:"Sesi Anda telah berakhir. Silakan login kembali",403:"Anda tidak memiliki akses untuk melakukan tindakan ini",404:"Data tidak ditemukan",422:a.response?.data?.responseMessage||a.message||"Data yang dikirim tidak valid",429:"Terlalu banyak permintaan. Coba lagi nanti",500:"Terjadi kesalahan server. Coba lagi nanti",502:"Server sedang maintenance",503:"Layanan tidak tersedia"};return s||l[t]||"Terjadi kesalahan yang tidak diketahui"},re={login:a=>h.post("/login",a),logout:()=>h.post("/logout"),refresh:()=>h.post("/refresh"),me:()=>h.get("/me"),profile:()=>h.get("/profil"),updateProfile:a=>h.put("/profil",a),resetPassword:a=>h.post("/akun/reset-password",a)},ne={absen:a=>h.post("/absensi",a),absenPulang:a=>h.post("/absensi/pulang",a),izinSakit:a=>h.post("/absensi/izinsakit",a),cekJarak:a=>h.post("/absensi/cek-jarak",a),riwayat:()=>h.get("/absensi/riwayat"),riwayatAbsenHariIni:()=>h.get("/absensi/hariini")},J={rekap:a=>h.get("/admin/rekap",{params:a}),getSettings:()=>h.get("/admin/pengaturan"),updateSettings:a=>h.put("/admin/pengaturan",a),updateMyProfile:a=>h.put("/admin/profil",a),getJurusan:a=>h.get("/admin/jurusan",{params:a}),createJurusan:a=>h.post("/admin/jurusan",a),updateJurusan:(a,s)=>h.put(`/admin/jurusan/${a}`,s),deleteJurusan:a=>h.delete(`/admin/jurusan/${a}`),deleteAllJurusan:()=>h.delete("/admin/jurusan-delete-all"),getKelas:()=>h.get("/admin/kelas"),createKelas:a=>h.post("/admin/kelas",a),updateKelas:(a,s)=>h.put(`/admin/kelas/${a}`,s),deleteKelas:a=>h.delete(`/admin/kelas/${a}`),deleteAllKelas:()=>h.delete("/admin/kelas-delete-all"),getRiwayatKelas:a=>h.get("/admin/riwayat-kelas",{params:a}),updateRiwayatKelas:(a,s)=>h.put(`/admin/riwayat-kelas/${a}`,s),promoteClass:(a,s)=>h.post(`/admin/riwayat-kelas/promote/${a}`,s),getWaliKelas:()=>h.get("/admin/wali-kelas"),createWaliKelas:a=>h.post("/admin/wali-kelas",a),updateWaliKelas:(a,s)=>h.put(`/admin/wali-kelas/${a}`,s),deleteWaliKelas:a=>h.delete(`/admin/wali-kelas/${a}`),deleteAllWaliKelas:()=>h.delete("/admin/wali-kelas-delete-all"),getGuruPiket:()=>h.get("/admin/guru-piket"),createGuruPiket:a=>h.post("/admin/guru-piket",a),updateGuruPiket:(a,s)=>h.put(`/admin/guru-piket/${a}`,s),deleteGuruPiket:a=>h.delete(`/admin/guru-piket/${a}`),deleteAllGuruPiket:()=>h.delete("/admin/guru-piket-delete-all"),getJadwalPiket:()=>h.get("/admin/jadwal-piket"),createJadwalPiket:a=>h.post("/admin/jadwal-piket",a),bulkCreateJadwalPiket:a=>h.post("/admin/jadwal-piket-bulk",a),updateJadwalPiket:(a,s)=>h.put(`/admin/jadwal-piket/${a}`,s),deleteJadwalPiket:a=>h.delete(`/admin/jadwal-piket/${a}`),deleteAllJadwalPiket:()=>h.delete("/admin/jadwal-piket-delete-all"),importSiswa:(a,s)=>h.post("/admin/import-siswa",a,{onUploadProgress:s}),getDataSiswa:a=>h.get("/admin/kelola-datasiswa",{params:a}),createSiswa:a=>h.post("/admin/kelola-datasiswa/create",a),updateSiswa:(a,s)=>h.post("/admin/kelola-datasiswa/update",{siswa_id:a,...s}),deleteSiswa:a=>h.delete(`/admin/kelola-datasiswa/${a}`),deleteAllSiswa:()=>h.delete("/admin/kelola-datasiswa/delete-all")},oe={laporan:()=>h.get("/guru/laporan"),walasInfo:()=>h.get("/walas/info"),aktifitasTerbaru:()=>h.get("/aktivitas-terbaru"),getSiswaIzinSakit:()=>h.get("/absensi/siswaIzinSakit"),updateAbsensiStatus:a=>h.post("/absensi/updateStatus",a),updateAbsensiStatusAll:a=>h.post("/absensi/updateAbsensiStatus",a),lihatAbsensiSiswa:a=>h.get("/absensi/lihat",{params:a}),lihatAbsensiHariIni:()=>h.get("/absensi/hari-ini"),getRencanaAbsensi:()=>h.get("/absensi/rencana"),createRencanaAbsensi:a=>h.post("/absensi/rencana",a),updateRencanaStatusHari:a=>h.post("/absensi/rencana/update-status",a)},Ta={getDashboardStats:()=>h.get("/dashboard/stats"),totalSiswa:()=>h.get("/total-siswa"),siswaHadirHariIni:()=>h.get("/hadir-hariini"),siswaTerlambatHariIni:()=>h.get("/terlambat-hariini"),siswaIzinHariIni:()=>h.get("/izin-hariini"),siswaSakitHariIni:()=>h.get("/sakit-hariini"),getPengaturan:()=>h.get("/pengaturan")},fe={listKelas:()=>h.get("/utility/kelas"),getDataSiswa:a=>h.get("/utility/siswa",{params:a})},be=r.createContext(),De=()=>{const a=r.useContext(be);if(!a)throw new Error("useAuth must be used within an AuthProvider");return a},$a=({children:a})=>{const[s,t]=r.useState(null),[o,l]=r.useState(!0),m=r.useRef(!1);r.useEffect(()=>{if(m.current)return;m.current=!0,(async()=>{try{const _=await re.me();_.data.responseStatus?t(_.data.responseData):t(null)}catch(_){console.log("No valid session found:",_.response?.status),t(null)}finally{l(!1)}})()},[]);const p=async b=>{try{const P=(await re.login(b)).data;if(P.responseStatus){const D=P?.responseData?.user??P?.responseData;return t(D),{success:!0,data:D}}else return{success:!1,message:P.responseMessage}}catch(_){if(_.response?.status===403&&_.response?.data?.responseMessage?.includes("Jadwal Piket")){const D=_.response.data.errors;return A.fire({icon:"error",title:"Akses Ditolak",html:`
            <div class="text-left">
              <p class="mb-3 text-red-600 font-semibold">ğŸš« Anda tidak terjadwal sebagai guru piket hari ini</p>
              
              <div class="bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4">
                <h4 class="font-semibold text-blue-800 mb-2">ğŸ“… Informasi Hari Ini:</h4>
                <div class="space-y-1 text-sm">
                  <div><strong>Hari:</strong> ${D.hari_ini}</div>
                  <div><strong>Tanggal:</strong> ${D.tanggal_ini}</div>
                  ${D.guru_piket_hari_ini?`<div><strong>Guru Piket Hari Ini:</strong> ${D.guru_piket_hari_ini.nama} (${D.guru_piket_hari_ini.username})</div>`:"<div><strong>Guru Piket Hari Ini:</strong> Tidak ada yang terjadwal</div>"}
                </div>
              </div>
              
              ${D.jadwal_terdekat?`<div class="bg-green-50 border border-green-200 rounded-lg p-4 mb-4">
                    <h4 class="font-semibold text-green-800 mb-2">ğŸ“‹ Jadwal Piket Anda Berikutnya:</h4>
                    <div class="text-sm">
                      <div><strong>Hari:</strong> ${D.jadwal_terdekat.hari}</div>
                      <div><strong>Tanggal:</strong> ${D.jadwal_terdekat.tanggal_formatted}</div>
                    </div>
                  </div>`:`<div class="bg-orange-50 border border-orange-200 rounded-lg p-4">
                    <h4 class="font-semibold text-orange-800 mb-2">âš ï¸ Perhatian:</h4>
                    <p class="text-sm text-orange-700">
                      Anda belum memiliki jadwal piket yang terdaftar. 
                      Silakan hubungi admin untuk mengatur jadwal piket Anda.
                    </p>
                  </div>`}
            </div>
          `,confirmButtonText:"Mengerti",confirmButtonColor:"#dc2626",width:500,allowOutsideClick:!1,allowEscapeKey:!1}),{success:!1,message:_.response.data.responseMessage,isScheduleError:!0}}return{success:!1,message:Ie(_,"Gagal login. Periksa username dan password Anda.")}}},c=async()=>{try{await re.logout()}catch(b){console.error("Logout error:",b)}finally{t(null)}},f={user:s,loading:o,login:p,logout:c,refreshToken:async()=>{try{return!!(await re.refresh()).data.responseStatus}catch(b){return console.error("Token refresh error:",b),c(),!1}},isAuthenticated:!!s};return e.jsx(be.Provider,{value:f,children:a})},Ba=({message:a})=>e.jsx("div",{className:"flex flex-col min-h-screen",children:e.jsx("main",{className:"flex items-center justify-center flex-grow",children:e.jsxs("div",{className:"p-6 text-red-700 bg-red-100 border border-red-400 rounded-lg",children:[e.jsx("h2",{className:"mb-2 text-lg font-semibold",children:"Terjadi Kesalahan"}),e.jsx("p",{className:"text-sm",children:a??"Gagal memuat data. Silakan coba lagi nanti."})]})})}),Pe=({size:a="large",text:s="Memuat...",fullScreen:t=!0,overlay:o=!1})=>{const l={small:"h-6 w-6",medium:"h-8 w-8",large:"h-12 w-12"},m=()=>e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:`animate-spin rounded-full border-b-2 border-[#003366] mx-auto ${l[a]}`}),s&&e.jsx("p",{className:"mt-4 text-gray-600",children:s})]});return o?e.jsx("div",{className:"absolute inset-0 bg-white bg-opacity-75 flex items-center justify-center z-50",children:e.jsx(m,{})}):t?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsx(m,{})}):e.jsx(m,{})},za=({loading:a,children:s,className:t="",disabled:o,...l})=>e.jsxs("button",{className:`relative ${t} ${a?"cursor-not-allowed opacity-75":""}`,disabled:a||o,...l,children:[a&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent"})}),e.jsx("span",{className:a?"invisible":"visible",children:s})]}),Ea=a=>a.toLocaleDateString("id-ID",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),Ga=()=>{const[a,s]=r.useState(!1),[t,o]=r.useState(null);return{handleAbsen:async(c,n)=>{s(!0),o(null);try{return{success:!0,data:(c==="pulang"?await ne.absenPulang(n):await ne.absen(n)).data}}catch(f){const b=f.response?.data;if(f.response?.status===422&&b?.responseMessage?.includes("radius")){const _=b?.errors?.distance||null;return{success:!1,message:b.responseMessage,distance:_}}return{success:!1,message:b?.responseMessage||"Terjadi kesalahan pada server"}}finally{s(!1)}},handleSakit:async c=>{s(!0),o(null);try{return{success:!0,data:(await ne.izinSakit(c)).data}}catch(n){const f=n.response?.data;return o(f?.message||f?.responseMessage||"Terjadi kesalahan pada server"),{success:!1,message:f?.message||f?.responseMessage||"Terjadi kesalahan pada server",errors:f?.errors||null}}finally{s(!1)}},handleIzin:async c=>{s(!0),o(null);try{return{success:!0,data:(await ne.izinSakit(c)).data}}catch(n){const f=n.response?.data;return o(f?.message||f?.responseMessage||"Terjadi kesalahan pada server"),{success:!1,message:f?.message||f?.responseMessage||"Terjadi kesalahan pada server",errors:f?.errors||null}}finally{s(!1)}},loading:a,error:t}},Ra=(a,s=1e3)=>{const[t,o]=r.useState(0);return r.useEffect(()=>{let l=0;const m=a/(s/16),p=setInterval(()=>{l+=m,l>=a&&(l=a,clearInterval(p)),o(Math.floor(l))},16);return()=>clearInterval(p)},[a,s]),t},Ha=()=>{const[a,s]=r.useState([]),[t,o]=r.useState(!0),[l,m]=r.useState(null),p=r.useCallback(async()=>{try{o(!0);const n=await oe.getRencanaAbsensi();n.data.responseStatus?s(n.data.responseData):m(n.data.responseMessage||"Gagal memuat data")}catch(n){m(n.message||"Terjadi kesalahan saat memuat data")}finally{o(!1)}},[]),c=r.useCallback(async()=>{await p()},[p]);return r.useEffect(()=>{p()},[p]),{data:a,loading:t,error:l,refreshData:c}},Ka=a=>{const[s,t]=r.useState({tanggal:"",keterangan:"",mode:"single"}),o=r.useCallback(p=>{const{name:c,value:n}=p.target;t(f=>({...f,[c]:n}))},[]),l=r.useCallback(()=>{t({tanggal:"",keterangan:"",mode:"single"})},[]),m=r.useCallback(async p=>{p.preventDefault();try{const c={tanggal:s.tanggal,keterangan:s.keterangan,mode:s.mode},n=await oe.createRencanaAbsensi(c);return n.data.responseStatus?(await a(),l(),{success:!0,message:"Rencana absensi berhasil ditambahkan!"}):{success:!1,message:n.data.responseMessage||"Gagal menambahkan data"}}catch{return{success:!1,message:"Terjadi kesalahan saat mengirim data"}}},[s,a,l]);return{formData:s,handleChange:o,handleSubmit:m,resetForm:l}},Te=(a,s)=>s==="admin"||s==="kepala_sekolah"?[{key:"home",label:"Beranda",href:"/dashboard",icon:"HomeIcon"},{key:"rekap",label:"Rekap",href:"/dashboard/rekap",icon:"CalendarIcon"},{key:"kelola sekolah",label:"Kelola Sekolah",icon:"SchoolIcon",children:[{key:"jurusan",label:"Jurusan",href:"/dashboard/jurusan",icon:"BookOpenIcon"},{key:"wali-kelas",label:"Wali Kelas",href:"/dashboard/wali-kelas",icon:"UsersIcon"},{key:"kelas",label:"Kelas",href:"/dashboard/kelas",icon:"BuildingIcon"},{key:"guru-piket",label:"Guru Piket",href:"/dashboard/guru-piket",icon:"UsersIcon"},{key:"jadwal-piket",label:"Jadwal Piket",href:"/dashboard/jadwal-piket",icon:"ClockIcon"},{key:"import-siswa",label:"Import Data Siswa",href:"/dashboard/import-siswa",icon:"UploadIcon"},{key:"kelola-siswa",label:"Kelola Data Siswa",href:"/dashboard/kelola-siswa",icon:"UsersIcon"},{key:"riwayat-kelas",label:"Riwayat Kelas",href:"/dashboard/riwayat-kelas",icon:"HistoryIcon"}]},{key:"pengaturan",label:"Pengaturan Sistem",href:"/dashboard/pengaturan",icon:"SettingsIcon"},{key:"profil",label:"Profil",href:"/profil",icon:"UserIcon"},{key:"logout",label:"Logout",href:"#",icon:"LogoutIcon",onClick:a}]:s==="walas"?[{key:"home",label:"Beranda",href:"/dashboard",icon:"HomeIcon"},{key:"rekap-walas",label:"Rekap Absensi",href:"/dashboard/rekap-walas",icon:"CalendarIcon"},{key:"profil",label:"Profil",href:"/profil",icon:"UserIcon"},{key:"logout",label:"Logout",href:"#",icon:"LogoutIcon",onClick:a}]:[{key:"home",label:"Beranda",href:"/dashboard",icon:"HomeIcon"},{key:"absensi",label:"Absensi",icon:"CheckIcon",children:[{key:"rencana-absensi",label:"Rencana Absensi",href:"/dashboard/rencana-absensi",icon:"CalendarPlusIcon"},{key:"absen-hari-ini",label:"Absen Hari Ini",href:"/dashboard/absensi-hari-ini",icon:"CalendarCheckIcon"},{key:"izin-sakit",label:"Izin / Sakit",href:"/dashboard/siswa-izinsakit",icon:"HeartHandshakeIcon"},{key:"lihat-absensi",label:"Lihat Absensi",href:"/dashboard/lihat-absensi",icon:"EyeIcon"}]},{key:"profil",label:"Profil",href:"/profil",icon:"UserIcon"},{key:"logout",label:"Logout",href:"#",icon:"LogoutIcon",onClick:a}],de={SettingsIcon:()=>e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",children:[e.jsx("path",{d:"M12 15a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z",stroke:"#cfe6ff",strokeWidth:"1.6"}),e.jsx("path",{d:"M19.4 15a1.6 1.6 0 0 0 .32 1.76l.06.06a2 2 0 0 1-2.83 2.83l-.06-.06a1.6 1.6 0 0 0-1.76-.32 1.6 1.6 0 0 0-1 1.46V21a2 2 0 0 1-4 0v-.05a1.6 1.6 0 0 0-1-1.46 1.6 1.6 0 0 0-1.76.32l-.06.06a2 2 0 0 1-2.83-2.83l.06-.06a1.6 1.6 0 0 0 .32-1.76 1.6 1.6 0 0 0-1.46-1H3a2 2 0 0 1 0-4h.05a1.6 1.6 0 0 0 1.46-1 1.6 1.6 0 0 0-.32-1.76l-.06-.06a2 2 0 0 1 2.83-2.83l.06.06a1.6 1.6 0 0 0 1.76.32 1.6 1.6 0 0 0 1-1.46V3a2 2 0 0 1 4 0v.05a1.6 1.6 0 0 0 1 1.46 1.6 1.6 0 0 0 1.76-.32l.06-.06a2 2 0 0 1 2.83 2.83l-.06.06a1.6 1.6 0 0 0-.32 1.76 1.6 1.6 0 0 0 1.46 1H21a2 2 0 0 1 0 4h-.05a1.6 1.6 0 0 0-1.46 1Z",stroke:"#cfe6ff",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round"})]}),HomeIcon:()=>e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",children:[e.jsx("path",{d:"M3 10.5L12 4l9 6.5",stroke:"#cfe6ff",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M5 21V11.5h14V21",stroke:"#cfe6ff",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round"})]}),CheckIcon:()=>e.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",children:e.jsx("path",{d:"M20 6L9 17l-5-5",stroke:"#cfe6ff",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round"})}),CalendarIcon:()=>e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",children:[e.jsx("rect",{x:"3",y:"5",width:"18",height:"16",rx:"2",stroke:"#cfe6ff",strokeWidth:"1.6"}),e.jsx("path",{d:"M16 3v4M8 3v4",stroke:"#cfe6ff",strokeWidth:"1.6",strokeLinecap:"round"})]}),UsersIcon:()=>e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",children:[e.jsx("path",{d:"M17 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",stroke:"#cfe6ff",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("circle",{cx:"12",cy:"7",r:"4",stroke:"#cfe6ff",strokeWidth:"1.6"})]}),UserIcon:()=>e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",children:[e.jsx("circle",{cx:"12",cy:"8",r:"3",stroke:"#cfe6ff",strokeWidth:"1.6"}),e.jsx("path",{d:"M6 20v-1a6 6 0 0 1 12 0v1",stroke:"#cfe6ff",strokeWidth:"1.6",strokeLinecap:"round"})]}),LogoutIcon:()=>e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",children:[e.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",stroke:"#cfe6ff",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M16 17l5-5-5-5",stroke:"#cfe6ff",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M21 12H9",stroke:"#cfe6ff",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round"})]}),SchoolIcon:()=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-school-icon lucide-school",children:[e.jsx("path",{d:"M14 21v-3a2 2 0 0 0-4 0v3"}),e.jsx("path",{d:"M18 5v16"}),e.jsx("path",{d:"m4 6 7.106-3.79a2 2 0 0 1 1.788 0L20 6"}),e.jsx("path",{d:"m6 11-3.52 2.147a1 1 0 0 0-.48.854V19a2 2 0 0 0 2 2h16a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-5a1 1 0 0 0-.48-.853L18 11"}),e.jsx("path",{d:"M6 5v16"}),e.jsx("circle",{cx:"12",cy:"9",r:"2"})]}),BookOpenIcon:()=>e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",children:[e.jsx("path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",stroke:"#cfe6ff",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",stroke:"#cfe6ff",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round"})]}),UserCheckIcon:()=>e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",children:[e.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",stroke:"#cfe6ff",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("circle",{cx:"9",cy:"7",r:"4",stroke:"#cfe6ff",strokeWidth:"1.6"}),e.jsx("path",{d:"m16 11 2 2 4-4",stroke:"#cfe6ff",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round"})]}),BuildingIcon:()=>e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",children:[e.jsx("rect",{x:"4",y:"2",width:"16",height:"20",rx:"2",stroke:"#cfe6ff",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M9 22v-4h6v4",stroke:"#cfe6ff",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M8 6h.01M16 6h.01M8 10h.01M16 10h.01M8 14h.01M16 14h.01",stroke:"#cfe6ff",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round"})]}),ShieldIcon:()=>e.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",children:e.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z",stroke:"#cfe6ff",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round"})}),ClockIcon:()=>e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10",stroke:"#cfe6ff",strokeWidth:"1.6"}),e.jsx("path",{d:"M12 6v6l4 2",stroke:"#cfe6ff",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round"})]}),UploadIcon:()=>e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",children:[e.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",stroke:"#cfe6ff",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M17 8l-5-5-5 5",stroke:"#cfe6ff",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M12 3v12",stroke:"#cfe6ff",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round"})]}),HistoryIcon:()=>e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",children:[e.jsx("path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",stroke:"#cfe6ff",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M3 3v5h5",stroke:"#cfe6ff",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M12 7v5l4 2",stroke:"#cfe6ff",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round"})]}),CalendarCheckIcon:()=>e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",children:[e.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2",stroke:"#cfe6ff",strokeWidth:"1.6"}),e.jsx("path",{d:"M16 2v4M8 2v4",stroke:"#cfe6ff",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M3 10h18",stroke:"#cfe6ff",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"m9 16 2 2 4-4",stroke:"#cfe6ff",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round"})]}),HeartHandshakeIcon:()=>e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",children:[e.jsx("path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.29 1.51 4.04 3 5.5",stroke:"#cfe6ff",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M12 5L8 21l4-7 4 7-4-16",stroke:"#cfe6ff",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round"})]}),EyeIcon:()=>e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",children:[e.jsx("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z",stroke:"#cfe6ff",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("circle",{cx:"12",cy:"12",r:"3",stroke:"#cfe6ff",strokeWidth:"1.6"})]}),CalendarPlusIcon:()=>e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",children:[e.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2",stroke:"#cfe6ff",strokeWidth:"1.6"}),e.jsx("path",{d:"M16 2v4M8 2v4",stroke:"#cfe6ff",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M3 10h18",stroke:"#cfe6ff",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M10 16h4M12 14v4",stroke:"#cfe6ff",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round"})]})};function $e({defaultCollapsed:a=!1,onToggle:s,isMobileOpen:t=!1,onMobileToggle:o}){const[l,m]=r.useState(a),[p,c]=r.useState(new Set),[n,f]=r.useState(!1),{logout:b,user:_}=De(),P=xe(),D=ge();r.useEffect(()=>{const w=()=>{f(window.innerWidth<1024)};return w(),window.addEventListener("resize",w),()=>window.removeEventListener("resize",w)},[]);const T=Q.useCallback(async()=>{(await A.fire({title:"Konfirmasi Logout",text:"Anda yakin ingin keluar dari aplikasi?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#003366",cancelButtonColor:"#6b7280",confirmButtonText:"Ya, keluar",cancelButtonText:"Batal"})).isConfirmed&&(b(),P("/login"))},[b,P]),H=Q.useMemo(()=>Te(T,_?.role),[T,_?.role]),G=w=>D.pathname===w,F=w=>w?.some(S=>D.pathname===S.href);r.useEffect(()=>{const w=H.find(S=>S.children&&S.children.some(v=>D.pathname===v.href));w&&!p.has(w.key)&&c(S=>{const v=new Set(S);return v.add(w.key),v})},[D.pathname]);const W=w=>{if(w.children){c(S=>{const v=new Set(S);return v.has(w.key)?v.delete(w.key):v.add(w.key),v});return}if(w.key==="logout"){w.onClick?.();return}P(w.href),o&&o(!1)};return e.jsxs(e.Fragment,{children:[t&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-10 lg:hidden",onClick:()=>o&&o(!1)}),e.jsxs("aside",{className:`fixed top-0 left-0 flex flex-col bg-slate-900 text-slate-100 transition-all duration-200 z-20
        ${n?(t?"translate-x-0":"-translate-x-full")+" w-[260px]":(l?"w-[72px]":"w-[260px]")+" translate-x-0"} h-screen p-3`,children:[e.jsx("div",{className:"flex items-center gap-3 p-2",children:!l&&e.jsxs("div",{children:[e.jsx("h1",{className:"font-bold text-base whitespace-nowrap",children:"SATRIA"}),e.jsx("p",{className:"text-sm",children:"Sistem Absensi Trimulia Jakarta"})]})}),e.jsx("nav",{className:"flex-1 overflow-y-auto",children:H.map(w=>{const S=G(w.href)||F(w.children);return e.jsxs("div",{children:[e.jsxs("div",{onClick:()=>{w.children?c(v=>{const M=new Set(v);return M.has(w.key)?M.delete(w.key):M.add(w.key),M}):W(w)},className:`flex items-center justify-between px-2 py-2.5 rounded-md cursor-pointer transition-colors 
                ${S?"bg-blue-600/30 text-white":"text-slate-300 hover:bg-white/5"}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-7 flex justify-center",children:de[w.icon]()}),!l&&!n&&e.jsx("span",{className:`text-sm ${S?"font-semibold":""}`,children:w.label}),n&&e.jsx("span",{className:`text-sm ${S?"font-semibold":""}`,children:w.label})]}),w.children&&!l&&!n&&e.jsx("div",{className:"text-xs",children:p.has(w.key)?"â–¾":"â–¸"}),w.children&&n&&e.jsx("div",{className:"text-xs",children:p.has(w.key)?"â–¾":"â–¸"})]}),w.children&&(!n&&!l||n)&&p.has(w.key)&&e.jsx("div",{className:"ml-7 mt-1",children:w.children.map(v=>e.jsxs("div",{onClick:()=>P(v.href),className:`flex items-center gap-3 px-2 py-2 rounded-md text-sm cursor-pointer transition 
                      ${G(v.href)?"bg-blue-600/40 text-white":"text-slate-400 hover:bg-white/5"}`,children:[v.icon&&e.jsx("div",{className:"w-4 flex justify-center",children:de[v.icon]()}),e.jsx("span",{children:v.label})]},v.key))})]},w.key)})}),e.jsx("div",{className:"text-xs text-blue-300 px-2 py-2"})]})]})}const Wa=({children:a})=>{const[s,t]=r.useState(!1),[o,l]=r.useState(!1),[m,p]=r.useState(!1);r.useEffect(()=>{const n=()=>{p(window.innerWidth<1024)};return n(),window.addEventListener("resize",n),()=>window.removeEventListener("resize",n)},[]);const c=n=>{l(typeof n=="boolean"?n:f=>!f)};return e.jsxs("div",{className:"flex bg-gray-50 min-h-screen",children:[e.jsx($e,{defaultCollapsed:s,onToggle:()=>t(n=>!n),isMobileOpen:o,onMobileToggle:c}),e.jsxs("main",{className:`
          flex-1 transition-all duration-200 overflow-y-auto
          ${m?"ml-0":s?"ml-[72px]":"ml-[260px] mt-4"}
        `,children:[m&&e.jsx("div",{className:"lg:hidden bg-white shadow-sm border-b p-4",children:e.jsx("button",{onClick:()=>c(),className:"bg-slate-900 text-white p-2 rounded-md shadow-lg","aria-label":"Toggle menu",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})}),e.jsx("div",{className:m?"p-4":"",children:a})]})]})},Be=({notification:a})=>a?e.jsxs("div",{className:`fixed top-6 right-6 z-50 flex items-center gap-3 px-5 py-3 rounded-lg shadow-xl text-white font-medium transition-transform transform ${a.type==="success"?"bg-green-600 animate-slideIn":"bg-red-600 animate-slideIn"}`,children:[e.jsx("span",{className:"text-xl",children:a.type==="success"?"âœ…":"âš ï¸"}),e.jsx("span",{children:a.message})]}):null,Fa=({show:a,onClose:s,formData:t,onChange:o,onSubmit:l})=>{if(!a)return null;const m=new Date().toISOString().split("T")[0],p=()=>{if(!t.tanggal)return"";const c=new Date(t.tanggal+"T00:00:00"),n=new Date(c);n.setDate(c.getDate()+364);const f=["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"],b=c.getDate(),_=f[c.getMonth()],P=c.getFullYear(),D=n.getDate(),T=f[n.getMonth()],H=n.getFullYear();return`Rencana absensi akan dibuat untuk tanggal ${b} ${_} ${P} s.d. ${D} ${T} ${H} (1 tahun ke depan).`};return e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-md p-6 animate-fadeIn",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4 text-gray-800",children:"Tambah Rencana Absensi"}),e.jsxs("form",{onSubmit:l,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Tanggal"}),e.jsx("input",{type:"date",name:"tanggal",value:t.tanggal,onChange:o,required:!0,min:m,className:"w-full border rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-400"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Buat selama 1 tahun ke depan"}),e.jsxs("select",{name:"mode",value:t.mode,onChange:o,className:"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-400",children:[e.jsx("option",{value:"single",children:"Tidak"}),e.jsx("option",{value:"week",children:"Ya"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Keterangan (opsional)"}),e.jsx("textarea",{name:"keterangan",value:t.keterangan,onChange:o,className:"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-400"})]}),t.mode==="week"&&t.tanggal&&e.jsx("div",{className:"text-sm text-gray-700 bg-gray-50 border rounded-lg px-3 py-2",children:p()}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-3",children:[e.jsx("button",{type:"button",onClick:s,className:"px-4 py-2 border rounded-lg hover:bg-gray-100 transition",children:"Batal"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition",children:"Simpan"})]})]})]})})},Oa=({data:a,onUpdated:s})=>{const[t,o]=r.useState(""),l=a.reduce((d,x)=>(d[x.tanggal]||(d[x.tanggal]=[]),d[x.tanggal].push(x),d),{});if(Object.keys(l).length===0)return e.jsx("p",{className:"text-gray-600 text-center py-10 bg-gray-50 rounded-lg",children:"Belum ada data rencana absensi."});const m=r.useMemo(()=>Object.entries(l).sort((d,x)=>new Date(d[0])-new Date(x[0])),[l]),p=(()=>{const d=new Date,x=d.getFullYear(),k=String(d.getMonth()+1).padStart(2,"0"),j=String(d.getDate()).padStart(2,"0");return`${x}-${k}-${j}`})(),c=r.useMemo(()=>m.filter(([d])=>String(d)>=p),[m,p]),n=r.useMemo(()=>{if(!t.trim())return c;const d=t.toLowerCase();return c.filter(([x])=>{const k=new Date(x),j=k.toLocaleDateString("id-ID",{weekday:"long"}).toLowerCase(),y=k.toLocaleDateString("id-ID",{year:"numeric",month:"long",day:"numeric"}).toLowerCase(),g=x;return j.includes(d)||y.includes(d)||g.includes(d)})},[c,t]),f=7,[b,_]=r.useState(1),P=Math.max(1,Math.ceil(n.length/f)),D=(b-1)*f,T=n.slice(D,D+f);Q.useEffect(()=>{_(1)},[t]);const H=d=>new Date(d).toLocaleDateString("id-ID",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),G=d=>{if(!d)return"";const x=String(d);return/^\d{8}$/.test(x)?`${x.slice(0,4)}/${x.slice(4,8)}`:(/^\d{4}\/\d{4}$/.test(x),x)},F=d=>{let x=0,k=0,j=0;for(const y of d)y.status_hari==="normal"?x+=1:y.status_hari==="libur"?k+=1:j+=1;return{normal:x,libur:k,lainnya:j,total:d.length}},[W,w]=r.useState(null),[S,v]=r.useState("normal"),[M,$]=r.useState("");return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white shadow-md rounded-xl p-4 border border-gray-100",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),e.jsx("input",{type:"text",placeholder:"Cari berdasarkan hari atau tanggal...",value:t,onChange:d=>o(d.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),t&&e.jsx("button",{onClick:()=>o(""),className:"px-3 py-2 text-sm text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-lg transition",children:"Clear"})]}),t&&e.jsxs("p",{className:"mt-2 text-sm text-gray-600",children:["Ditemukan ",n.length,' hasil untuk "',t,'"']})]}),T.length===0?e.jsx("p",{className:"text-gray-600 text-center py-10 bg-gray-50 rounded-lg",children:t?`Tidak ada hasil untuk "${t}"`:"Belum ada data rencana absensi."}):T.map(([d,x])=>e.jsxs("div",{className:"bg-white shadow-md rounded-2xl p-6 hover:shadow-lg transition border border-gray-100",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h2",{className:"text-lg font-semibold text-blue-700",children:[H(d)," ",e.jsxs("span",{className:"ml-2 text-sm text-gray-600",children:["Tahun ajaran: ",G(x[0]?.thn_ajaran)]})]}),e.jsx("button",{className:"ml-3 px-3 py-1.5 text-xs font-medium rounded-lg border border-blue-200 text-blue-700 hover:bg-blue-50",onClick:()=>{w(d);const k=F(x),j=k.libur===k.total?"libur":k.normal===k.total?"normal":"";v(j),$("")},children:"Edit Status Hari"})]}),!1,e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:x.map((k,j)=>e.jsxs("div",{className:"rounded-xl p-4 bg-gradient-to-br from-gray-50 to-white border border-gray-200 ",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("p",{className:"font-medium text-gray-800",children:[k.kelas.tingkat," ",k.kelas.jurusan.nama_jurusan,k.kelas.paralel!==null?`-${k.kelas.paralel}`:""]}),e.jsx("span",{className:`text-xs px-2 py-1 rounded-full capitalize ${k.status_hari==="normal"?"bg-green-100 text-green-700":k.status_hari==="libur"?"bg-red-100 text-red-700":"bg-yellow-100 text-yellow-700"}`,children:k.status_hari})]}),k.keterangan&&e.jsx("p",{className:"text-sm text-gray-600 mt-2",children:k.keterangan})]},`${k.tanggal}-${k.kelas.kelas_id}-${j}`))})]},d)),e.jsxs("div",{className:"flex items-center justify-center mt-6 space-x-4",children:[e.jsx("button",{className:"px-3 py-1.5 border rounded-lg text-sm hover:bg-gray-50",disabled:b===1,onClick:()=>_(d=>Math.max(1,d-1)),children:"Sebelumnya"}),e.jsxs("span",{className:"text-sm text-gray-600",children:[b," / ",P]}),e.jsx("button",{className:"px-3 py-1.5 border rounded-lg text-sm hover:bg-gray-50",disabled:b>=P,onClick:()=>_(d=>Math.min(P,d+1)),children:"Selanjutnya"})]}),W&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-md p-6 animate-fadeIn",children:[e.jsx("h3",{className:"text-xl font-bold mb-4 text-gray-800",children:"Edit Status Hari"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Tanggal"}),e.jsx("div",{className:"w-full border border-gray-200 rounded-lg px-3 py-2 bg-gray-50",children:H(W)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Status Hari"}),e.jsxs("select",{value:S,onChange:d=>v(d.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:[e.jsx("option",{value:"normal",children:"Normal"}),e.jsx("option",{value:"libur",children:"Libur"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Keterangan (opsional)"}),e.jsx("input",{type:"text",value:M,onChange:d=>$(d.target.value),placeholder:"Keterangan (opsional)",className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-3",children:[e.jsx("button",{className:"px-4 py-2 border rounded-lg hover:bg-gray-100 transition",onClick:()=>w(null),children:"Batal"}),e.jsx("button",{className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition",onClick:async()=>{try{const d=await oe.updateRencanaStatusHari({tanggal:W,status_hari:S,keterangan:M});d.data?.responseStatus?(s&&await s(),w(null)):alert(d.data?.responseMessage||"Gagal memperbarui status hari")}catch{alert("Terjadi kesalahan saat memperbarui status hari")}},children:"Simpan"})]})]})]})})]})},Ua=()=>{const a=xe(),s=ge(),t=[{id:"riwayat",label:"Riwayat",path:"/siswa/riwayat",icon:l=>e.jsx("svg",{className:`w-6 h-6 ${l?"text-blue-600":"text-gray-500"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})})},{id:"home",label:"Home",path:"/siswa/home",icon:l=>e.jsx("svg",{className:`w-6 h-6 ${l?"text-blue-600":"text-gray-500"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})})},{id:"profil",label:"Profil",path:"/siswa/profil",icon:l=>e.jsx("svg",{className:`w-6 h-6 ${l?"text-blue-600":"text-gray-500"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}],o=l=>{a(l)};return e.jsx("div",{className:"fixed bottom-6 left-0 right-0 z-50 px-6",children:e.jsx("div",{className:"max-w-md mx-auto bg-white rounded-2xl shadow-2xl border border-gray-200",children:e.jsx("div",{className:"flex justify-around items-center py-3 px-4",children:t.map(l=>{const m=s.pathname===l.path;return e.jsxs("button",{onClick:()=>o(l.path),className:`flex flex-col items-center justify-center py-2 px-4 rounded-xl transition-all duration-200 ${m?"transform scale-105":"hover:bg-gray-50"}`,children:[l.icon(m),e.jsx("span",{className:`text-xs mt-1 font-medium ${m?"text-blue-600":"text-gray-500"}`,children:l.label})]},l.id)})})})})},ze=({data:a=[],columns:s=[],searchFields:t=[],defaultSort:o={field:"",direction:"desc"},defaultItemsPerPage:l=10,searchPlaceholder:m="Cari data...",emptyMessage:p="Tidak ada data",className:c=""})=>{const[n,f]=r.useState(1),[b,_]=r.useState(l),[P,D]=r.useState(""),[T,H]=r.useState(o.field),[G,F]=r.useState(o.direction),W=u=>{T===u?F(G==="asc"?"desc":"asc"):(H(u),F("desc")),f(1)},w=u=>T?[...u].sort((C,N)=>{const z=s.find(Y=>Y.key===T);let E,O;return z?.sortValue?(E=z.sortValue(C),O=z.sortValue(N)):(E=z?.accessor?z.accessor(C):C[T],O=z?.accessor?z.accessor(N):N[T]),E instanceof Date&&O instanceof Date?G==="asc"?E.getTime()-O.getTime():O.getTime()-E.getTime():(E=String(E||"").toLowerCase(),O=String(O||"").toLowerCase(),G==="asc"?E>O?1:E<O?-1:0:E<O?1:E>O?-1:0)}):u,S=r.useMemo(()=>{const u=a.filter(C=>{if(!P)return!0;const N=P.toLowerCase();return t.some(z=>{const E=typeof z=="function"?z(C):C[z];return String(E||"").toLowerCase().includes(N)})});return w(u)},[a,P,T,G,t,s]),v=S.length,M=Math.ceil(v/b),$=(n-1)*b,d=$+b,x=S.slice($,d),k=u=>{_(u),f(1)},j=u=>{D(u),f(1)},y=u=>{u>=1&&u<=M&&f(u)},g=()=>{const u=[];if(M<=5)for(let N=1;N<=M;N++)u.push(N);else{const N=Math.max(1,n-2),z=Math.min(M,N+5-1);N>1&&(u.push(1),N>2&&u.push("..."));for(let E=N;E<=z;E++)u.push(E);z<M&&(z<M-1&&u.push("..."),u.push(M))}return u},L=({field:u})=>s.find(N=>N.key===u)?.sortable?T!==u?e.jsx("svg",{className:"w-4 h-4 ml-1 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16V4m0 0L3 8m4-4l4 4m6 0v12m0 0l4-4m-4 4l-4-4"})}):G==="asc"?e.jsx("svg",{className:"w-4 h-4 ml-1 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 15l7-7 7 7"})}):e.jsx("svg",{className:"w-4 h-4 ml-1 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})}):null,K=()=>{const u=[];return s.forEach(C=>{C.sortable&&(u.push({value:`${C.key}-desc`,label:`${C.label} (Z-A)`}),u.push({value:`${C.key}-asc`,label:`${C.label} (A-Z)`}))}),u};return e.jsxs("div",{className:c,children:[e.jsxs("div",{className:"mb-4 flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Tampilkan:"}),e.jsxs("select",{value:b,onChange:u=>k(Number(u.target.value)),className:"border border-gray-300 rounded px-2 py-1 text-sm",children:[e.jsx("option",{value:5,children:"5"}),e.jsx("option",{value:10,children:"10"}),e.jsx("option",{value:25,children:"25"}),e.jsx("option",{value:50,children:"50"})]}),e.jsx("span",{className:"text-sm text-gray-600",children:"data per halaman"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Cari:"}),e.jsx("input",{type:"text",value:P,onChange:u=>j(u.target.value),placeholder:m,className:"border border-gray-300 rounded px-3 py-1 text-sm w-64"}),P&&e.jsx("button",{onClick:()=>j(""),className:"text-gray-400 hover:text-gray-600",title:"Hapus pencarian",children:"âœ•"})]}),K().length>0&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Urutkan:"}),e.jsx("select",{value:`${T}-${G}`,onChange:u=>{const[C,N]=u.target.value.split("-");H(C),F(N),f(1)},className:"border border-gray-300 rounded px-2 py-1 text-sm",children:K().map(u=>e.jsx("option",{value:u.value,children:u.label},u.value))})]})]}),e.jsxs("div",{className:"text-sm text-gray-600 flex flex-col gap-1",children:[e.jsx("div",{children:P?e.jsxs(e.Fragment,{children:["Menampilkan ",$+1," - ",Math.min(d,v)," dari ",v," hasil pencarian (total: ",a.length," data)"]}):e.jsxs(e.Fragment,{children:["Menampilkan ",$+1," - ",Math.min(d,v)," dari ",v," data"]})}),T&&e.jsxs("div",{className:"text-xs text-gray-500",children:["Diurutkan: ",s.find(u=>u.key===T)?.label," (",G==="asc"?"A-Z":"Z-A",")"]})]})]}),e.jsx("div",{className:"overflow-x-auto bg-white rounded-lg border border-gray-200",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsx("tr",{children:s.map(u=>e.jsx("th",{className:`px-4 py-2 text-left text-xs font-semibold text-gray-600 ${u.sortable?"cursor-pointer hover:bg-gray-100 select-none":""}`,onClick:u.sortable?()=>W(u.key):void 0,children:e.jsxs("div",{className:"flex items-center",children:[u.label,e.jsx(L,{field:u.key})]})},u.key))})}),e.jsxs("tbody",{className:"divide-y divide-gray-100",children:[x.map((u,C)=>e.jsx("tr",{children:s.map(N=>e.jsx("td",{className:"px-4 py-2",children:N.render?N.render(u,$+C):N.accessor?N.accessor(u):u[N.key]},N.key))},u.id?String(u.id):`row-${$+C}`)),x.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:s.length,className:"px-4 py-6 text-center text-gray-500",children:P?e.jsxs(e.Fragment,{children:['Tidak ada data yang cocok dengan pencarian "',P,'"',e.jsx("br",{}),e.jsx("button",{onClick:()=>j(""),className:"text-blue-600 hover:text-blue-800 underline mt-2",children:"Hapus filter pencarian"})]}):p})})]})]})}),M>1&&e.jsxs("div",{className:"mt-4 flex flex-col sm:flex-row items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>y(n-1),disabled:n===1,className:"px-3 py-1 border border-gray-300 rounded text-sm hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"â† Sebelumnya"}),e.jsx("div",{className:"flex items-center gap-1",children:g().map((u,C)=>e.jsx("button",{onClick:()=>typeof u=="number"?y(u):null,disabled:u==="...",className:`px-3 py-1 text-sm rounded ${u===n?"bg-[#003366] text-white":u==="..."?"cursor-default":"border border-gray-300 hover:bg-gray-50"}`,children:u},C))}),e.jsx("button",{onClick:()=>y(n+1),disabled:n===M,className:"px-3 py-1 border border-gray-300 rounded text-sm hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Selanjutnya â†’"})]}),e.jsxs("div",{className:"text-sm text-gray-600",children:["Halaman ",n," dari ",M]})]})]})};class Ja extends Q.Component{constructor(s){super(s),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(s){return{hasError:!0}}componentDidCatch(s,t){console.error("Error caught by boundary:",s,t),this.setState({error:s,errorInfo:t||{componentStack:"No component stack available"}})}render(){return this.state.hasError?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:e.jsxs("div",{className:"max-w-md w-full bg-white rounded-lg shadow-lg p-6",children:[e.jsx("div",{className:"flex items-center justify-center w-12 h-12 mx-auto bg-red-100 rounded-full mb-4",children:e.jsx("svg",{className:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900 text-center mb-2",children:"Oops! Terjadi Kesalahan"}),e.jsx("p",{className:"text-gray-600 text-center mb-6",children:"Aplikasi mengalami masalah teknis. Tim kami telah diberitahu dan sedang memperbaikinya."}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("button",{onClick:()=>window.location.reload(),className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-md transition-colors",children:"Muat Ulang Halaman"}),e.jsx("button",{onClick:()=>window.location.href="/",className:"w-full bg-gray-100 hover:bg-gray-200 text-gray-700 font-medium py-2 px-4 rounded-md transition-colors",children:"Kembali ke Beranda"})]}),!1]})}):this.props.children}}const Ee=a=>a.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Ge=a=>a.replace(/^([A-Z])|[\s-_]+(\w)/g,(s,t,o)=>o?o.toUpperCase():t.toLowerCase()),ce=a=>{const s=Ge(a);return s.charAt(0).toUpperCase()+s.slice(1)},ke=(...a)=>a.filter((s,t,o)=>!!s&&s.trim()!==""&&o.indexOf(s)===t).join(" ").trim(),Re=a=>{for(const s in a)if(s.startsWith("aria-")||s==="role"||s==="title")return!0};var He={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Ke=r.forwardRef(({color:a="currentColor",size:s=24,strokeWidth:t=2,absoluteStrokeWidth:o,className:l="",children:m,iconNode:p,...c},n)=>r.createElement("svg",{ref:n,...He,width:s,height:s,stroke:a,strokeWidth:o?Number(t)*24/Number(s):t,className:ke("lucide",l),...!m&&!Re(c)&&{"aria-hidden":"true"},...c},[...p.map(([f,b])=>r.createElement(f,b)),...Array.isArray(m)?m:[m]]));const U=(a,s)=>{const t=r.forwardRef(({className:o,...l},m)=>r.createElement(Ke,{ref:m,iconNode:s,className:ke(`lucide-${Ee(ce(a))}`,`lucide-${a}`,o),...l}));return t.displayName=ce(a),t};const We=[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]],Fe=U("book",We);const Oe=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Ue=U("circle-check-big",Oe);const Je=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],ue=U("circle-x",Je);const Ve=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],qe=U("clock",Ve);const Ye=[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]],Ze=U("cloud-upload",Ye);const Xe=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],me=U("download",Xe);const Qe=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],Va=U("eye-off",Qe);const ea=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],ye=U("eye",ea);const aa=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]],qa=U("file-down",aa);const sa=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]],he=U("file-spreadsheet",sa);const ta=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],ra=U("pen",ta);const na=[["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["path",{d:"m9 20 3-6 3 6",key:"se2kox"}],["path",{d:"m6 8 6 2 6-2",key:"4o3us4"}],["path",{d:"M12 10v4",key:"1kjpxc"}]],Ya=U("person-standing",na);const ia=[["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M18 5v16",key:"1ethyx"}],["path",{d:"m4 6 7.106-3.79a2 2 0 0 1 1.788 0L20 6",key:"zywc2d"}],["path",{d:"m6 11-3.52 2.147a1 1 0 0 0-.48.854V19a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-5a1 1 0 0 0-.48-.853L18 11",key:"1d4ql0"}],["path",{d:"M6 5v16",key:"1sn0nx"}],["circle",{cx:"12",cy:"9",r:"2",key:"1092wv"}]],Za=U("school",ia);const la=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],oa=U("trash-2",la);const da=[["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],ca=U("trash",da);const ua=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Xa=U("user",ua),Qa=()=>{const a=()=>{window.open("/guidebook.html","_blank")};return e.jsxs("button",{onClick:a,className:"fixed bottom-6 right-6 bg-[#003366] text-white p-4 rounded-full shadow-lg hover:bg-[#002244] transition-all duration-300 z-50 flex items-center justify-center group","aria-label":"Panduan Penggunaan",children:[e.jsx(Fe,{className:"w-6 h-6"}),e.jsx("span",{className:"absolute right-full mr-3 bg-gray-800 text-white text-sm px-3 py-1 rounded-lg whitespace-nowrap shadow-md",children:"Lihat Panduan Penggunaan"})]})},R=({className:a="",...s})=>e.jsx("div",{className:`animate-pulse bg-gray-200 rounded ${a}`,...s}),ma=({count:a=1})=>e.jsx("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:Array.from({length:a}).map((s,t)=>e.jsx("div",{className:"p-6 bg-white border border-gray-200 shadow-sm rounded-xl",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(R,{className:"w-12 h-12 rounded-lg"}),e.jsxs("div",{className:"ml-4 flex-1",children:[e.jsx(R,{className:"h-4 w-24 mb-2"}),e.jsx(R,{className:"h-6 w-16"})]})]})},t))}),je=({rows:a=5,columns:s=4})=>e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg shadow-sm overflow-hidden",children:[e.jsx("div",{className:"bg-gray-50 px-6 py-3 border-b border-gray-200",children:e.jsx("div",{className:"flex space-x-4",children:Array.from({length:s}).map((t,o)=>e.jsx(R,{className:"h-4 flex-1"},o))})}),e.jsx("div",{className:"divide-y divide-gray-100",children:Array.from({length:a}).map((t,o)=>e.jsx("div",{className:"px-6 py-4",children:e.jsx("div",{className:"flex space-x-4",children:Array.from({length:s}).map((l,m)=>e.jsx(R,{className:"h-4 flex-1"},m))})},o))})]}),es=()=>e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{children:[e.jsx(R,{className:"h-8 w-64 mb-2"}),e.jsx(R,{className:"h-4 w-48"})]}),e.jsx(ma,{count:4}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"p-6 bg-white border border-gray-200 shadow-sm rounded-xl",children:[e.jsx(R,{className:"h-6 w-48 mb-4"}),e.jsx(R,{className:"h-64 w-full"})]}),e.jsxs("div",{className:"p-6 bg-white border border-gray-200 shadow-sm rounded-xl",children:[e.jsx(R,{className:"h-6 w-48 mb-4"}),e.jsx(R,{className:"h-64 w-full"})]})]})]}),as=({fields:a=4})=>e.jsxs("div",{className:"bg-white border border-gray-200 shadow-sm rounded-xl p-6",children:[e.jsx(R,{className:"h-6 w-48 mb-6"}),e.jsx("div",{className:"space-y-4",children:Array.from({length:a}).map((s,t)=>e.jsxs("div",{children:[e.jsx(R,{className:"h-4 w-24 mb-2"}),e.jsx(R,{className:"h-10 w-full"})]},t))}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx(R,{className:"h-10 w-20"}),e.jsx(R,{className:"h-10 w-20"})]})]}),ha=({items:a=5})=>e.jsxs("div",{className:"bg-white border border-gray-200 shadow-sm rounded-xl",children:[e.jsx("div",{className:"p-4 border-b border-gray-200",children:e.jsx(R,{className:"h-6 w-32"})}),e.jsx("div",{className:"divide-y divide-gray-100",children:Array.from({length:a}).map((s,t)=>e.jsxs("div",{className:"p-4 flex items-center space-x-4",children:[e.jsx(R,{className:"w-10 h-10 rounded-full"}),e.jsxs("div",{className:"flex-1",children:[e.jsx(R,{className:"h-4 w-32 mb-2"}),e.jsx(R,{className:"h-3 w-48"})]}),e.jsx(R,{className:"h-8 w-16"})]},t))})]}),ss=()=>e.jsxs("div",{className:"bg-white border border-gray-200 shadow-sm rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center space-x-6 mb-6",children:[e.jsx(R,{className:"w-20 h-20 rounded-full"}),e.jsxs("div",{className:"flex-1",children:[e.jsx(R,{className:"h-6 w-48 mb-2"}),e.jsx(R,{className:"h-4 w-32"})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Array.from({length:6}).map((a,s)=>e.jsxs("div",{children:[e.jsx(R,{className:"h-4 w-24 mb-2"}),e.jsx(R,{className:"h-10 w-full"})]},s))})]}),xa=r.memo(({title:a,value:s,icon:t,color:o="blue",onClick:l,loading:m=!1})=>{const p=r.useMemo(()=>{const n={blue:"bg-blue-100 text-blue-600",green:"bg-green-100 text-green-600",yellow:"bg-yellow-100 text-yellow-600",red:"bg-red-100 text-red-600",purple:"bg-purple-100 text-purple-600",gray:"bg-gray-100 text-gray-600"};return`p-3 rounded-lg ${n[o]||n.blue}`},[o]),c=r.useCallback(()=>{l&&!m&&l()},[l,m]);return m?e.jsx("div",{className:"p-6 bg-white border border-gray-200 shadow-sm rounded-xl",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"animate-pulse bg-gray-200 w-12 h-12 rounded-lg"}),e.jsxs("div",{className:"ml-4 flex-1",children:[e.jsx("div",{className:"animate-pulse bg-gray-200 h-4 w-24 mb-2 rounded"}),e.jsx("div",{className:"animate-pulse bg-gray-200 h-6 w-16 rounded"})]})]})}):e.jsx("div",{className:`p-6 bg-white border border-gray-200 shadow-sm rounded-xl ${l?"cursor-pointer hover:shadow-md transition-shadow":""}`,onClick:c,children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:p,children:t}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:a}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:s})]})]})})});xa.displayName="OptimizedCard";const ga=r.memo(({data:a,columns:s,onEdit:t,onDelete:o,onView:l,actions:m=!0})=>{const p=r.useCallback(()=>{t&&t(a)},[t,a]),c=r.useCallback(()=>{o&&o(a)},[o,a]),n=r.useCallback(()=>{l&&l(a)},[l,a]),f=r.useMemo(()=>s.map(b=>typeof b.accessor=="function"?b.accessor(a):a[b.accessor]||"-"),[a,s]);return e.jsxs("tr",{className:"border-t hover:bg-gray-50 transition-colors",children:[f.map((b,_)=>e.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:b},_)),m&&e.jsx("td",{className:"px-4 py-2 text-sm",children:e.jsxs("div",{className:"flex space-x-2",children:[l&&e.jsx("button",{onClick:n,className:"text-blue-600 hover:text-blue-800 text-xs",children:"Lihat"}),t&&e.jsx("button",{onClick:p,className:"text-green-600 hover:text-green-800 text-xs",children:"Edit"}),o&&e.jsx("button",{onClick:c,className:"text-red-600 hover:text-red-800 text-xs",children:"Hapus"})]})})]})});ga.displayName="OptimizedTableRow";const pa=r.memo(({value:a,onChange:s,placeholder:t="Cari...",debounceMs:o=300})=>{const[l,m]=Q.useState(a);Q.useEffect(()=>{const c=setTimeout(()=>{s&&l!==a&&s(l)},o);return()=>clearTimeout(c)},[l,s,a,o]);const p=r.useCallback(c=>{m(c.target.value)},[]);return e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:l,onChange:p,placeholder:t,className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})]})});pa.displayName="OptimizedSearchInput";const fa=r.memo(({options:a,value:s,onChange:t,placeholder:o="Pilih filter..."})=>{const l=r.useCallback(p=>{t&&t(p.target.value)},[t]),m=r.useMemo(()=>a.map(p=>e.jsx("option",{value:p.value,children:p.label},p.value)),[a]);return e.jsxs("select",{value:s,onChange:l,className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:o}),m]})});fa.displayName="OptimizedFilter";const ba=r.memo(({currentPage:a,totalPages:s,onPageChange:t,showInfo:o=!0})=>{const l=r.useMemo(()=>{const c=[],n=[];for(let f=Math.max(2,a-2);f<=Math.min(s-1,a+2);f++)c.push(f);return a-2>2?n.push(1,"..."):n.push(1),n.push(...c),a+2<s-1?n.push("...",s):n.push(s),n},[a,s]),m=r.useCallback(p=>{t&&p!==a&&p>=1&&p<=s&&t(p)},[t,a,s]);return s<=1?null:e.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-white border-t border-gray-200 sm:px-6",children:[o&&e.jsxs("div",{className:"flex-1 flex justify-between sm:hidden",children:[e.jsx("button",{onClick:()=>m(a-1),disabled:a===1,className:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50",children:"Previous"}),e.jsx("button",{onClick:()=>m(a+1),disabled:a===s,className:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50",children:"Next"})]}),e.jsxs("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[o&&e.jsx("div",{children:e.jsxs("p",{className:"text-sm text-gray-700",children:["Halaman ",e.jsx("span",{className:"font-medium",children:a})," dari"," ",e.jsx("span",{className:"font-medium",children:s})]})}),e.jsx("div",{children:e.jsxs("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px",children:[e.jsx("button",{onClick:()=>m(a-1),disabled:a===1,className:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50",children:"â†"}),l.map((p,c)=>e.jsx("button",{onClick:()=>typeof p=="number"&&m(p),disabled:p==="...",className:`relative inline-flex items-center px-4 py-2 border text-sm font-medium ${p===a?"z-10 bg-blue-50 border-blue-500 text-blue-600":p==="..."?"border-gray-300 bg-white text-gray-700 cursor-default":"border-gray-300 bg-white text-gray-500 hover:bg-gray-50"}`,children:p},c)),e.jsx("button",{onClick:()=>m(a+1),disabled:a===s,className:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50",children:"â†’"})]})})]})]})});ba.displayName="OptimizedPagination";const Z=a=>{const s=t=>String(t).padStart(2,"0");return`${a.getFullYear()}-${s(a.getMonth()+1)}-${s(a.getDate())}`},we=a=>{const s=new Date(a),t=s.getDay(),o=(t===0?-6:1)-t;return s.setDate(s.getDate()+o),s.setHours(0,0,0,0),s},ka=a=>{const s=we(a),t=new Date(s);return t.setDate(s.getDate()+6),t.setHours(23,59,59,999),t},ya=a=>new Date(a.getFullYear(),a.getMonth(),1),ja=a=>new Date(a.getFullYear(),a.getMonth()+1,0);function wa(){const[a,s]=r.useState("harian"),[t,o]=r.useState(()=>new Date),[l,m]=r.useState([]),[p,c]=r.useState([]),[n,f]=r.useState(""),[b,_]=r.useState(!1),[P,D]=r.useState(""),T=r.useMemo(()=>{if(a==="harian")return{period:a,tanggal:Z(t)};if(a==="mingguan"){const M=we(t),$=ka(t);return{period:a,start:Z(M),end:Z($)}}const S=ya(t),v=ja(t);return{period:"bulanan",start:Z(S),end:Z(v)}},[a,t]),H=async()=>{try{const M=((await fe.listKelas())?.data?.responseData||[]).map($=>({id:$.kelas_id,label:`${$.tingkat} ${$.jurusan} ${$.paralel||""}`.trim()}));c(M)}catch{c([])}},G=async()=>{_(!0),D("");try{const S=v=>{const M=new Map;return v.flat().forEach($=>{const d=$.kelas||$.kelas_nama||"-";M.has(d)||M.set(d,{kelas:d,hadir:0,terlambat:0,izin:0,sakit:0,alfa:0});const x=M.get(d);x.hadir+=$.hadir||0,x.terlambat+=$.terlambat||0,x.izin+=$.izin||0,x.sakit+=$.sakit||0,x.alfa+=$.alfa||0}),Array.from(M.values())};if(a==="harian"){const M=(await J.rekap({tanggal:T.tanggal}))?.data?.responseData?.rekap||[];m(Array.isArray(M)?M:[])}else{const v=new Date(T.start),M=new Date(T.end),$=[],d=new Date(v);for(;d<=M;)$.push(Z(d)),d.setDate(d.getDate()+1);const x=await Promise.all($.map(k=>J.rekap({tanggal:k}).then(j=>j?.data?.responseData?.rekap||[]).catch(()=>[])));m(S(x))}}catch{D("Gagal memuat rekap. Periksa koneksi atau API backend.")}finally{_(!1)}};r.useEffect(()=>{H()},[]),r.useEffect(()=>{G()},[T]);const F=r.useMemo(()=>n?l.filter(S=>(S.kelas_nama||S.kelas||"")===n):l,[l,n]),W=()=>{const S=[["Kelas","Hadir","Terlambat","Izin","Sakit","Alfa"],...F.map(x=>[x.kelas_nama||x.kelas||"-",x.hadir||0,x.terlambat||0,x.izin||0,x.sakit||0,x.alfa||0])],v=ie.aoa_to_sheet(S),M=ie.book_new();ie.book_append_sheet(M,v,"Rekap");const $=T.tanggal||`${T.start}_${T.end}`,d=n?`_${n.replace(/\s+/g,"-")}`:"";Le(M,`rekap_${a}_${$}${d}.xlsx`)},w=()=>{window.print()};return b&&l.length===0?e.jsxs("div",{className:"px-4 py-8 max-w-7xl mx-auto sm:px-6 lg:px-8",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded w-64 mb-2"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-48"})]})}),e.jsx(je,{rows:8,columns:7})]}):e.jsx("div",{className:"min-h-screen bg-gray-50",children:e.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-200 mb-6",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>s("harian"),className:`px-3 py-1.5 rounded-md text-sm ${a==="harian"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700"}`,children:"Harian"}),e.jsx("button",{onClick:()=>s("mingguan"),className:`px-3 py-1.5 rounded-md text-sm ${a==="mingguan"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700"}`,children:"Mingguan"}),e.jsx("button",{onClick:()=>s("bulanan"),className:`px-3 py-1.5 rounded-md text-sm ${a==="bulanan"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700"}`,children:"Bulanan"})]}),e.jsx("input",{type:"date",value:Z(t),onChange:S=>o(new Date(S.target.value)),className:"px-3 py-1.5 border border-gray-300 rounded-md text-sm"}),e.jsxs("select",{value:n,onChange:S=>f(S.target.value),className:"px-3 py-1.5 border border-gray-300 rounded-md text-sm",children:[e.jsx("option",{value:"",children:"Semua Kelas"}),p.map(S=>e.jsx("option",{value:S.label,children:S.label},S.id))]}),e.jsxs("div",{className:"ml-auto flex gap-2",children:[e.jsx("button",{onClick:W,className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg text-sm font-medium",children:"Export Excel"}),e.jsx("button",{onClick:w,className:"bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg text-sm font-medium",children:"Export PDF"})]})]}),a!=="harian"&&e.jsxs("p",{className:"mt-2 text-xs text-gray-500",children:["Rentang: ",T.start," â€” ",T.end]})]}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden rekap-print-area",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"table-base",children:[e.jsx("thead",{className:"table-thead",children:e.jsxs("tr",{children:[e.jsx("th",{className:"table-th",children:"Kelas"}),e.jsx("th",{className:"table-th",children:"Hadir"}),e.jsx("th",{className:"table-th",children:"Terlambat"}),e.jsx("th",{className:"table-th",children:"Izin"}),e.jsx("th",{className:"table-th",children:"Sakit"}),e.jsx("th",{className:"table-th",children:"Alfa"})]})}),e.jsx("tbody",{className:"table-tbody",children:F.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"table-empty",children:"Tidak ada data rekap."})}):F.map((S,v)=>e.jsxs("tr",{className:"table-tr hover:bg-gray-50",children:[e.jsx("td",{className:"table-td",children:S.kelas_nama||S.kelas||"-"}),e.jsx("td",{className:"table-td",children:S.hadir||0}),e.jsx("td",{className:"table-td",children:S.terlambat||0}),e.jsx("td",{className:"table-td",children:S.izin||0}),e.jsx("td",{className:"table-td",children:S.sakit||0}),e.jsx("td",{className:"table-td",children:S.alfa||0})]},v))})]})})})]})})}const ts=Object.freeze(Object.defineProperty({__proto__:null,default:wa},Symbol.toStringTag,{value:"Module"})),va=({formData:a,handleChange:s,handleSave:t,handleCancel:o,kelasList:l=[]})=>{const[m,p]=r.useState(!1);return e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black/40 backdrop-blur-sm z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-2xl p-8 animate-fade-in",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-6 text-center",children:"Edit Data Siswa"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-5",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"text-sm font-semibold text-gray-700 mb-1",children:"NIS"}),e.jsx("input",{name:"nis",value:a.nis||"",onChange:s,className:"w-full border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none"})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"text-sm font-semibold text-gray-700 mb-1",children:"Nama"}),e.jsx("input",{name:"nama",value:a.nama||"",onChange:s,className:"w-full border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none"})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"text-sm font-semibold text-gray-700 mb-1",children:"Jenis Kelamin"}),e.jsxs("select",{name:"jenkel",value:a.jenkel||"",onChange:s,className:"w-full border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none",children:[e.jsx("option",{value:"",children:"Pilih Jenis Kelamin"}),e.jsx("option",{value:"L",children:"Laki-laki"}),e.jsx("option",{value:"P",children:"Perempuan"})]})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"text-sm font-semibold text-gray-700 mb-1",children:"Kelas"}),e.jsxs("select",{name:"kelas_id",value:a.kelas_id||"",onChange:s,className:"w-full border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none",children:[e.jsx("option",{value:"",children:"Pilih Kelas"}),l.map(c=>e.jsx("option",{value:c.id,children:c.label},c.id))]})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"text-sm font-semibold text-gray-700 mb-1",children:"Status"}),e.jsxs("select",{name:"status",value:a.status||"aktif",onChange:s,className:"w-full border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none",children:[e.jsx("option",{value:"aktif",children:"Aktif"}),e.jsx("option",{value:"naik kelas",children:"Naik Kelas"}),e.jsx("option",{value:"tidak naik kelas",children:"Tidak Naik Kelas"})]})]}),e.jsxs("div",{className:"md:col-span-2 flex flex-col",children:[e.jsx("label",{className:"text-sm font-semibold text-gray-700 mb-1",children:"Password Baru"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{name:"password",type:m?"text":"password",value:a.password||"",onChange:s,placeholder:"Kosongkan jika tidak ingin mengubah",className:"w-full border border-gray-300 rounded-lg px-4 py-2 pr-10 focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none"}),e.jsx("button",{type:"button",onClick:()=>p(!m),className:"absolute inset-y-0 right-0 px-3 flex items-center text-gray-500 hover:text-gray-700",children:m?"ğŸ™ˆ":"ğŸ‘ï¸"})]})]})]}),e.jsxs("div",{className:"mt-8 flex justify-end gap-3",children:[e.jsx("button",{onClick:o,className:"px-5 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition font-medium",children:"Batal"}),e.jsx("button",{onClick:t,className:"px-5 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition font-medium shadow-md",children:"Simpan Perubahan"})]})]})})},Na=()=>{const[a,s]=r.useState([]),[t,o]=r.useState(!0),[l,m]=r.useState(null),[p,c]=r.useState(null),[n,f]=r.useState({}),[b,_]=r.useState([]),[P,D]=r.useState([]),[T,H]=r.useState([]),[G,F]=r.useState(!1),[W,w]=r.useState({nis:"",nama:"",jenkel:"L",kelas_id:""}),[S,v]=r.useState(!1),[M,$]=r.useState([]),[d,x]=r.useState(!1),[k,j]=r.useState(""),[y,g]=r.useState(""),[L,K]=r.useState("");r.useEffect(()=>{(async()=>{try{const I=await J.getDataSiswa();I.status===200&&I.data.responseStatus?s(I.data.responseData):m(I.data.responseMessage||"Gagal memuat data siswa")}catch{m("Terjadi kesalahan saat memuat data siswa")}finally{o(!1)}})()},[]),r.useEffect(()=>{(async()=>{try{const B=(await fe.listKelas())?.data?.responseData??[];console.log("data kelas:",B),D(B);const V=B.map(q=>({id:q.kelas_id,label:`${q.tingkat} ${q.jurusan?.nama_jurusan??q.jurusan} ${q.paralel||""}`}));_(V)}catch{_([])}})()},[]),r.useEffect(()=>{(async()=>{try{const B=(await J.getJurusan())?.data?.responseData?.jurusan??[];H(Array.isArray(B)?B:[])}catch{H([])}})()},[]);const u=i=>{c(i.siswa_id),f({nis:i.nis,nama:i.nama,jenkel:i.jenkel,kelas_id:i.kelas_id||i.kelas?.kelas_id||"",status:i.status||"aktif"})},C=i=>{const{name:I,value:B}=i.target;f(V=>({...V,[I]:B}))},N=async()=>{try{const i={nis:n.nis,nama:n.nama,jenkel:n.jenkel,username:n.nis,status:n.status};if(n.kelas_id)i.kelas_id=Number(n.kelas_id);else{A.fire({icon:"error",title:"Gagal",text:"Kelas wajib dipilih."});return}n.password&&String(n.password).length>0&&(i.password=n.password);const I=await J.updateSiswa(p,i);if(I.status===200&&I.data.responseStatus){const B=await J.getDataSiswa();s(B.data.responseData),c(null),A.fire({icon:"success",title:"Berhasil",text:"Data siswa berhasil diperbarui"})}else A.fire({icon:"error",title:"Gagal",text:I.data.responseMessage||"Gagal memperbarui data"})}catch(i){const I=i?.response?.data?.responseMessage||"Terjadi kesalahan saat menyimpan data";A.fire({icon:"error",title:"Gagal",text:I})}},z=()=>{c(null),f({})},E=async i=>{j(i.nama),v(!0),x(!0),$([]);try{const B=(await J.getRiwayatKelas({siswa_id:i.siswa_id}))?.data?.responseData?.riwayat??[];$(B)}catch(I){console.error(I),A.fire({icon:"error",title:"Gagal",text:"Gagal memuat riwayat kelas"})}finally{x(!1)}},O=async i=>{if((await A.fire({title:"Hapus Siswa",text:`Apakah Anda yakin ingin menghapus siswa ${i.nama} (${i.nis})? Data absensi dan riwayat kelas akan ikut terhapus.`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Ya, Hapus!",cancelButtonText:"Batal"})).isConfirmed)try{const B=await J.deleteSiswa(i.siswa_id);if(B.status===200&&B.data.responseStatus){const V=await J.getDataSiswa();s(V.data.responseData),A.fire({icon:"success",title:"Berhasil",text:"Siswa berhasil dihapus"})}else A.fire({icon:"error",title:"Gagal",text:B.data.responseMessage||"Gagal menghapus siswa"})}catch(B){const V=B?.response?.data?.responseMessage||"Terjadi kesalahan saat menghapus siswa";A.fire({icon:"error",title:"Gagal",text:V})}},Y=async()=>{if((await A.fire({title:"Hapus Semua Siswa",html:`
        <div class="text-left">
          <p class="mb-2">Apakah Anda yakin ingin menghapus <strong>SEMUA DATA SISWA</strong>?</p>
          <p class="text-red-600 font-semibold mb-2">âš ï¸ PERINGATAN:</p>
          <ul class="text-sm text-gray-700 list-disc list-inside">
            <li>Semua data siswa akan dihapus permanen</li>
            <li>Semua riwayat kelas akan dihapus</li>
            <li>Semua data absensi akan dihapus</li>
            <li>Semua akun login siswa akan dihapus</li>
          </ul>
          <p class="mt-3 text-red-600 font-bold">Tindakan ini TIDAK DAPAT DIBATALKAN!</p>
        </div>
      `,icon:"warning",showCancelButton:!0,confirmButtonColor:"#dc2626",cancelButtonColor:"#6b7280",confirmButtonText:"Ya, Hapus Semua!",cancelButtonText:"Batal",reverseButtons:!0,focusCancel:!0})).isConfirmed&&(await A.fire({title:"Konfirmasi Terakhir",text:'Ketik "HAPUS SEMUA" untuk melanjutkan',input:"text",inputPlaceholder:"Ketik: HAPUS SEMUA",showCancelButton:!0,confirmButtonColor:"#dc2626",cancelButtonColor:"#6b7280",confirmButtonText:"Hapus Semua Data",cancelButtonText:"Batal",inputValidator:B=>{if(B!=="HAPUS SEMUA")return'Anda harus mengetik "HAPUS SEMUA" dengan benar!'}})).isConfirmed)try{const B=await J.deleteAllSiswa();B.status===200&&B.data.responseStatus?(s([]),A.fire({icon:"success",title:"Berhasil",text:"Semua data siswa berhasil dihapus"})):A.fire({icon:"error",title:"Gagal",text:B.data.responseMessage||"Gagal menghapus semua siswa"})}catch(B){const V=B?.response?.data?.responseMessage||"Terjadi kesalahan saat menghapus semua siswa";A.fire({icon:"error",title:"Gagal",text:V})}},se=r.useMemo(()=>a.filter(i=>{if(y&&(i.jenkel||"").toString()!==y)return!1;if(L){const I=i.kelas_id||i.kelas?.kelas_id;if(!I||String(I)!==String(L))return!1}return!0}),[a,y,L]),ee=()=>{g(""),K("")},te=async()=>{const i=String(W.nis||"").trim(),I=String(W.nama||"").trim(),B=String(W.kelas_id||"").trim();if(!i){A.fire({icon:"error",title:"Gagal",text:"NIS wajib diisi"});return}if(!/^\d+$/.test(i)){A.fire({icon:"error",title:"Gagal",text:"NIS hanya boleh mengandung angka"});return}if(!I){A.fire({icon:"error",title:"Gagal",text:"Nama wajib diisi"});return}if(!/^[a-zA-Z\s]+$/.test(I)){A.fire({icon:"error",title:"Gagal",text:"Nama tidak boleh mengandung angka dan simbol"});return}if(!B){A.fire({icon:"error",title:"Gagal",text:"Kelas wajib dipilih"});return}const V=Number(B);if(Number.isNaN(V)){A.fire({icon:"error",title:"Gagal",text:"Kelas tidak valid"});return}try{const q={...W,nis:i,nama:I,kelas_id:V},X=await J.createSiswa(q);if(X.status===200&&X.data.responseStatus){const ve=await J.getDataSiswa();s(ve.data.responseData),F(!1),w({nis:"",nama:"",jenkel:"L",kelas_id:""});const Ne=X?.data?.responseData?.password||"TRI12345";A.fire({icon:"success",title:"Siswa Berhasil Ditambahkan",html:`
            <div class="text-left">
              <p class="mb-3 text-green-600 font-semibold">âœ… Siswa berhasil ditambahkan!</p>
              
              <div class="bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4">
                <h4 class="font-semibold text-blue-800 mb-2">ğŸ“‹ Informasi Login:</h4>
                <div class="space-y-2 text-sm">
                  <div class="flex space-x-1">
                    <span class="text-gray-600">Username:</span>
                    <span class="font-mono bg-gray-100 px-2 py-1 rounded">${i}</span>
                  </div>
                  <div class="flex space-x-1">
                    <span class="text-gray-600">Password:</span>
                    <span class="font-mono bg-gray-100 px-2 py-1 rounded">${Ne}</span>
                  </div>
                </div>
              </div>
              
              <div class="bg-orange-50 border border-orange-200 rounded-lg p-4">
                <h4 class="font-semibold text-orange-800 mb-2">âš ï¸ Penting:</h4>
                <p class="text-sm text-orange-700">
                  Harap segera minta siswa untuk <strong>mengganti password default</strong> 
                  setelah login pertama kali untuk keamanan akun.
                </p>
              </div>
            </div>
          `,confirmButtonText:"OK, Mengerti",confirmButtonColor:"#003366",width:500,allowOutsideClick:!1,allowEscapeKey:!1})}else A.fire({icon:"error",title:"Gagal",text:X.data.responseMessage||"Gagal menambah siswa"})}catch(q){const X=q?.response?.data?.responseMessage||"Terjadi kesalahan saat menambah siswa";A.fire({icon:"error",title:"Gagal",text:X})}};if(t)return e.jsxs("div",{className:"px-4 py-8 max-w-7xl mx-auto sm:px-6 lg:px-8",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded w-64 mb-2"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-48"})]})}),e.jsx(je,{rows:10,columns:6})]});if(l)return e.jsx("div",{className:"p-4 text-red-600",children:l});const le=[{key:"no",label:"No",render:(i,I)=>I+1},{key:"nis",label:"NIS",sortable:!0,accessor:i=>i.nis||"-"},{key:"nama",label:"Nama",sortable:!0,accessor:i=>i.nama||"-"},{key:"jenkel",label:"Jenis Kelamin",sortable:!0,accessor:i=>i.jenkel==="L"?"Laki-laki":i.jenkel==="P"?"Perempuan":i.jenkel||"-"},{key:"tingkat",label:"Tingkat",sortable:!0,accessor:i=>i.kelas?.tingkat||"-"},{key:"jurusan",label:"Jurusan",sortable:!0,accessor:i=>i.kelas?.jurusan?.nama_jurusan||"-"},{key:"paralel",label:"Paralel",sortable:!0,accessor:i=>i.kelas?.paralel||"-"},{key:"status",label:"Status",sortable:!0,accessor:i=>i.status||"-"},{key:"actions",label:"Aksi",render:i=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>u(i),className:"p-2 text-blue-600 hover:text-blue-800 hover:bg-blue-50 rounded-lg transition-colors",title:"Edit",children:e.jsx(ra,{size:16})}),e.jsx("button",{onClick:()=>E(i),className:"p-2 text-green-600 hover:text-green-800 hover:bg-green-50 rounded-lg transition-colors",title:"Lihat Riwayat",children:e.jsx(ye,{size:16})}),e.jsx("button",{onClick:()=>O(i),className:"p-2 text-red-600 hover:text-red-800 hover:bg-red-50 rounded-lg transition-colors",title:"Hapus",children:e.jsx(oa,{size:16})})]})}],ae=["nis","nama",i=>i.kelas?.jurusan?.nama_jurusan||"",i=>i.kelas?.tingkat?String(i.kelas.tingkat):"",i=>i.kelas?.paralel||""];return e.jsxs("div",{className:"flex flex-col p-6 md:p-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Kelola Data Siswa"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:Y,disabled:a.length===0,className:"px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-lg hover:bg-red-700 disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center gap-2",children:[e.jsx(ca,{size:16}),"Hapus Semua"]}),e.jsx("button",{onClick:()=>F(i=>!i),className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700",children:G?"Tutup":"Tambah Siswa"})]})]}),l&&e.jsx("div",{className:"mb-3 text-red-600 font-semibold",children:l}),G&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:()=>F(!1)}),e.jsxs("div",{className:"relative z-10 w-full max-w-lg bg-white rounded-xl shadow-lg p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Tambah Siswa"})}),e.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[e.jsx("input",{type:"text",value:W.nis,onChange:i=>w(I=>({...I,nis:i.target.value})),placeholder:"NIS",className:"w-full border border-gray-300 rounded-lg px-3 py-2"}),e.jsx("input",{type:"text",value:W.nama,onChange:i=>w(I=>({...I,nama:i.target.value})),placeholder:"Nama",className:"w-full border border-gray-300 rounded-lg px-3 py-2"}),e.jsxs("select",{value:W.jenkel,onChange:i=>w(I=>({...I,jenkel:i.target.value})),className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:[e.jsx("option",{value:"L",children:"Laki-laki"}),e.jsx("option",{value:"P",children:"Perempuan"})]}),e.jsxs("select",{value:W.kelas_id,onChange:i=>w(I=>({...I,kelas_id:i.target.value})),className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:[e.jsx("option",{value:"",children:"Pilih Kelas"}),b.map(i=>e.jsx("option",{value:i.id,children:i.label},i.id))]}),e.jsxs("div",{className:"flex items-center justify-end gap-2 mt-2",children:[e.jsx("button",{onClick:()=>F(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200",children:"Batal"}),e.jsx("button",{onClick:te,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg hover:opacity-85",children:"Simpan"})]})]})]})]}),p&&e.jsx(va,{formData:n,handleChange:C,handleSave:N,handleCancel:z,kelasList:b}),S&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:()=>v(!1)}),e.jsxs("div",{className:"relative z-10 w-full max-w-2xl bg-white rounded-xl shadow-lg p-6 max-h-[80vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Riwayat Kelas: ",k]}),e.jsx("button",{onClick:()=>v(!1),className:"text-gray-500 hover:text-gray-700 text-xl",children:"Ã—"})]}),d?e.jsx(ha,{items:5}):M.length===0?e.jsx("div",{className:"text-center py-8 text-gray-500",children:"Tidak ada riwayat kelas tercatat."}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm text-left",children:[e.jsx("thead",{className:"bg-gray-50 text-gray-700 font-medium border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3",children:"No"}),e.jsx("th",{className:"px-4 py-3",children:"Kelas"}),e.jsx("th",{className:"px-4 py-3",children:"Status"}),e.jsx("th",{className:"px-4 py-3",children:"Tanggal Pencatatan"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:M.map((i,I)=>{const B=i.kelas?`${i.kelas.tingkat} ${i.kelas.jurusan?.nama_jurusan||""} ${i.kelas.paralel||""}`:"-",V=i.created_at?new Date(i.created_at).toLocaleDateString("id-ID",{day:"numeric",month:"long",year:"numeric"}):"-";return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3",children:I+1}),e.jsx("td",{className:"px-4 py-3 font-medium text-gray-800",children:B}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${i.status==="aktif"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:i.status})}),e.jsx("td",{className:"px-4 py-3 text-gray-600",children:V})]},i.riwayat_kelas_id)})})]})}),e.jsx("div",{className:"flex justify-end mt-4",children:e.jsx("button",{onClick:()=>v(!1),className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200",children:"Tutup"})})]})]}),e.jsxs("div",{className:"mb-4 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:[e.jsx("div",{children:e.jsxs("select",{value:y,onChange:i=>g(i.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:[e.jsx("option",{value:"",children:"Semua Jenkel"}),e.jsx("option",{value:"L",children:"Laki-laki"}),e.jsx("option",{value:"P",children:"Perempuan"})]})}),e.jsx("div",{children:e.jsxs("select",{value:L,onChange:i=>K(i.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:[e.jsx("option",{value:"",children:"Semua Kelas"}),b.map(i=>e.jsx("option",{value:i.id,children:i.label},i.id))]})}),e.jsx("div",{children:e.jsx("button",{onClick:ee,className:"w-full px-3 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Reset Filter"})})]}),e.jsx(ze,{data:se,columns:le,searchFields:ae,searchPlaceholder:"Cari nama atau NIS siswa...",emptyMessage:"Tidak ada data siswa",defaultSort:{field:"nama",direction:"asc"},defaultItemsPerPage:20})]})},rs=Object.freeze(Object.defineProperty({__proto__:null,default:Na},Symbol.toStringTag,{value:"Module"})),Sa=()=>{const[a,s]=r.useState(null),[t,o]=r.useState(!1),[l,m]=r.useState(0),[p,c]=r.useState(""),[n,f]=r.useState(!1),[b,_]=r.useState(!1),[P,D]=r.useState(null),[T,H]=r.useState(!1),[G,F]=r.useState(0),[W,w]=r.useState(0),S=[{id:"excel",name:"Template Excel (.xlsx)",description:"",icon:he,color:"text-green-600",bgColor:"bg-green-50",borderColor:"border-green-200",previewImage:"/images/preview.png",downloadUrl:"/templates/template-siswa.xlsx",format:".xlsx"}];r.useEffect(()=>{let g;return t?g=setInterval(()=>{F(L=>L+1)},1e3):F(0),()=>clearInterval(g)},[t]);const v=g=>{D(g),_(!0)},M=async g=>{try{const L=document.createElement("a");L.href=g.downloadUrl,L.download=`template-siswa${g.format}`,L.target="_blank",document.body.appendChild(L),L.click(),document.body.removeChild(L)}catch(L){console.error("Error downloading template:",L),A.fire({icon:"error",title:"Gagal mendownload template",text:"Terjadi kesalahan saat mendownload template. Silakan coba lagi."})}},$=g=>{s(g.target.files[0]),c(""),f(!1)},d=g=>{g.preventDefault(),H(!1);const L=g.dataTransfer.files&&g.dataTransfer.files[0];if(!L)return;const u=(L.name||"").split(".").pop().toLowerCase();if(!["xls","xlsx"].includes(u)){c("Format file tidak didukung. Gunakan .xls atau .xlsx"),f(!1);return}s(L),c(""),f(!1)},x=g=>{g.preventDefault(),T||H(!0)},k=g=>{g.preventDefault(),T&&H(!1)},j=g=>new Promise(L=>{const K=new FileReader;K.onload=u=>{try{const C=new Uint8Array(u.target.result),N=Ce(C,{type:"array"}),z=N.SheetNames[0],E=N.Sheets[z],O=ie.sheet_to_json(E,{header:1,defval:""}),Y=1;let se=!1,ee=0,te=0;for(let ae=Y;ae<O.length;ae++){const i=O[ae];if(!i||i.length===0)continue;const I=String(i[0]??"").trim(),B=String(i[2]??"").trim();!I&&!B||(se=!0,te++,I||ee++)}const le=Math.ceil(te*.5);if(w(le),!se){A.fire({icon:"warning",title:"Data kosong",text:"File tidak berisi data siswa dengan NIS dan Nama. Mohon isi data terlebih dahulu."}).then(()=>{L(!1)});return}if(ee>0){A.fire({icon:"warning",title:"NIS belum lengkap",text:`Terdapat ${ee} baris dengan NIS kosong. Mohon lengkapi NIS sebelum import.`}).then(()=>{L(!1)});return}L(!0)}catch(C){console.error("Gagal membaca file import siswa:",C),A.fire({icon:"error",title:"Gagal membaca file",text:"Gagal membaca file. Pastikan format mengikuti template yang disediakan."}).then(()=>{L(!1)})}},K.onerror=()=>{A.fire({icon:"error",title:"Gagal membaca file",text:"Gagal membaca file. Silakan pilih file lain atau coba lagi."}).then(()=>{L(!1)})},K.readAsArrayBuffer(g)}),y=async g=>{if(g.preventDefault(),!a){c("Silakan pilih file terlebih dahulu.");return}if(!await j(a))return;const K=new FormData;K.append("file",a);try{o(!0),m(0),c(""),f(!1);const u=await J.importSiswa(K,C=>{const N=Math.round(C.loaded*100/C.total);m(N)});if(u.status===200){const C=u.data?.responseData;c("Data siswa berhasil diimpor!"),f(!0);const N=C?.nis_duplikat;if(Array.isArray(N)&&N.length>0){const z=N.join(", ");A.fire({icon:"warning",title:"Sebagian NIS sudah terdaftar",text:`NIS berikut sudah ada di database dan tidak diimport ulang: ${z}`})}}else c("Gagal mengimpor data siswa."),f(!1)}catch(u){console.error("Import error:",u),console.error("Error response:",u.response?.data);const C=u.response?.data;let N="Gagal mengunggah file.";C?.errors?(N=C.errors,console.error("Detailed error:",C.errors)):C?.responseMessage&&(N=C.responseMessage),A.fire({icon:"error",title:"Gagal Import Data",html:`
                    <div class="text-left">
                        <p class="mb-3 text-red-600">${N}</p>
                        ${C?.errors?`
                            <div class="bg-yellow-50 border border-yellow-200 rounded-lg p-4">
                                <h4 class="font-semibold text-yellow-800 mb-2">ğŸ’¡ Solusi:</h4>
                                <ul class="text-sm text-yellow-700 space-y-1">
                                    <li>â€¢ Pastikan nama sheet Excel sesuai format: <strong>X/XI/XII NAMA_JURUSAN</strong></li>
                                    <li>â€¢ Contoh: "X TKJ", "XI Multimedia", "XII Rekayasa Perangkat Lunak"</li>
                                    <li>â€¢ Pastikan jurusan sudah terdaftar di sistem</li>
                                    <li>â€¢ Periksa menu Kelola Jurusan untuk melihat jurusan yang tersedia</li>
                                </ul>
                            </div>
                        `:""}
                    </div>
                `,confirmButtonText:"Mengerti",confirmButtonColor:"#dc2626",width:600}),c(N),f(!1)}finally{o(!1),setTimeout(()=>m(0),2e3)}};return e.jsxs("div",{className:"p-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-[#003366] mb-2",children:"Import Data Siswa"}),e.jsx("p",{className:"text-gray-500",children:"Upload file Excel sesuai dengan template yang disediakan"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Template File"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Pilih dan download template sesuai format yang Anda inginkan. Pastikan data mengikuti format yang benar."})]}),e.jsx("div",{className:"space-y-4",children:S.map(g=>{const L=g.icon;return e.jsxs("div",{className:`p-4 rounded-xl border-2 ${g.borderColor} ${g.bgColor} hover:shadow-md transition-all duration-200`,children:[e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-white",children:e.jsx(L,{className:`w-6 h-6 ${g.color}`})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:g.name}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:g.description}),e.jsx("div",{className:"mt-2",children:e.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:["Format: ",g.format]})})]})]})}),e.jsxs("div",{className:"flex space-x-2 mt-4",children:[e.jsxs("button",{onClick:()=>v(g),className:"flex items-center px-3 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsx(ye,{className:"w-4 h-4 mr-2"}),"Preview"]}),e.jsxs("button",{onClick:()=>M(g),className:"flex items-center px-3 py-2 text-sm font-medium text-white bg-green-600 hover:bg-green-700 rounded-lg transition-colors",children:[e.jsx(me,{className:"w-4 h-4 mr-2"}),"Download"]})]})]},g.id)})})]}),e.jsx("div",{className:"flex justify-center",children:e.jsxs("div",{className:"w-full max-w-md p-8 bg-white border border-gray-200 shadow-lg rounded-2xl",children:[e.jsxs("div",{className:"flex flex-col items-center mb-6",children:[e.jsx("div",{className:"p-4 bg-[#003366]/10 rounded-full",children:e.jsx(Ze,{className:"w-10 h-10 text-[#003366]"})}),e.jsx("h2",{className:"mt-4 text-2xl font-bold text-center text-gray-900",children:"Upload File"}),e.jsx("p",{className:"mt-1 text-sm text-center text-gray-500",children:"Pilih file yang sudah sesuai template"})]}),e.jsxs("form",{onSubmit:y,className:"space-y-5",children:[e.jsxs("div",{className:`flex flex-col items-center justify-center border-2 border-dashed rounded-xl p-6 cursor-pointer transition ${T?"border-[#003366] bg-[#003366]/5":"border-gray-300 hover:border-[#003366]"}`,onDrop:d,onDragOver:x,onDragLeave:k,children:[e.jsx("input",{id:"file",type:"file",accept:".xlsx, .xls",onChange:$,className:"hidden"}),e.jsx("label",{htmlFor:"file",className:"text-center text-gray-600 cursor-pointer",children:a?e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"font-semibold text-[#003366]",children:a.name}),e.jsx("p",{className:"text-xs text-gray-500",children:"Klik untuk ganti file"})]}):e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"font-semibold text-gray-600",children:"Klik untuk memilih file"}),e.jsx("p",{className:"mt-1 text-xs text-gray-400",children:"atau drag & drop ke sini"})]})})]}),t&&e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"w-full h-2 overflow-hidden bg-gray-200 rounded-full",children:e.jsx("div",{className:"bg-[#003366] h-2 transition-all duration-700 ease-in-out",style:{width:`${l}%`}})}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[e.jsx(qe,{className:"w-4 h-4"}),e.jsxs("span",{children:["Waktu: ",G,"s"]})]}),W>0&&e.jsxs("span",{className:"text-gray-500",children:["Est. ",W,"s"]})]}),e.jsx("p",{className:"text-center text-sm text-gray-600",children:"Sedang memproses data... Mohon tunggu"})]}),e.jsx("button",{type:"submit",disabled:t,className:`w-full py-2 font-medium text-white rounded-lg transition duration-200 shadow-md ${t?"bg-gray-400 cursor-not-allowed":"bg-[#003366] hover:bg-[#002244]"}`,children:t?"Mengunggah...":"Import Sekarang"})]}),p&&e.jsxs("div",{className:`mt-6 flex items-center justify-center gap-2 text-sm font-medium text-center p-3 rounded-lg ${n?"bg-green-50 text-green-700 border border-green-200":"bg-red-50 text-red-700 border border-red-200"}`,children:[n?e.jsx(Ue,{className:"w-5 h-5"}):e.jsx(ue,{className:"w-5 h-5"}),p]})]})})]}),b&&P&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-4xl w-full mx-4 max-h-[90vh] overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-xl font-semibold text-gray-900",children:["Preview: ",P.name]}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:P.description})]}),e.jsx("button",{onClick:()=>_(!1),className:"p-2 text-gray-400 hover:text-gray-600 rounded-lg hover:bg-gray-100 transition-colors",children:e.jsx(ue,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-140px)]",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-3",children:"Preview Template:"}),e.jsx("div",{className:"border border-gray-200 rounded-lg overflow-hidden bg-gray-50",children:e.jsxs("div",{className:"flex items-center justify-center p-4",children:[e.jsx("img",{src:P.previewImage,alt:`Preview ${P.name}`,className:"max-w-full h-auto rounded shadow-sm",onError:g=>{g.target.style.display="none",g.target.nextSibling.style.display="block"}}),e.jsxs("div",{className:"hidden text-center p-8 text-gray-500",children:[e.jsx(he,{className:"w-16 h-16 mx-auto mb-4 text-gray-400"}),e.jsx("p",{children:"Preview gambar tidak tersedia"}),e.jsx("p",{className:"text-sm mt-2",children:"Silakan download template untuk melihat format yang benar"})]})]})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"Petunjuk Penggunaan:"}),e.jsxs("ol",{className:"list-decimal list-inside space-y-1 text-sm text-gray-600",children:[e.jsx("li",{children:'Download template dengan klik tombol "Download"'}),e.jsx("li",{children:"Buka file template dengan aplikasi spreadsheet (Excel, LibreOffice, dll)"}),e.jsx("li",{children:"Isi data siswa sesuai dengan kolom yang tersedia"}),e.jsx("li",{children:"Pastikan format data sesuai dengan ketentuan"}),e.jsx("li",{children:"Simpan file dan upload melalui form di sebelah kanan"})]})]}),e.jsxs("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsx("h5",{className:"font-semibold text-blue-800 mb-2",children:"Catatan Penting:"}),e.jsxs("ul",{className:"text-sm text-blue-700 space-y-1",children:[e.jsx("li",{children:"â€¢ Jangan mengubah nama kolom header"}),e.jsx("li",{children:"â€¢ Pastikan tidak ada baris kosong di tengah data"}),e.jsx("li",{children:"â€¢ NIS dan NISN harus unik (tidak boleh sama)"}),e.jsx("li",{children:"â€¢ NISN akan terdaftar sebagai password siswa"}),e.jsx("li",{children:"â€¢ Kelas harus sudah terdaftar di sistem"})]})]})]})]}),e.jsxs("div",{className:"flex items-center justify-end space-x-3 p-6 border-t border-gray-200 bg-gray-50",children:[e.jsx("button",{onClick:()=>_(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Tutup"}),e.jsxs("button",{onClick:()=>{M(P),_(!1)},className:"flex items-center px-4 py-2 text-sm font-medium text-white bg-[#003366] rounded-lg hover:bg-[#002244] transition-colors",children:[e.jsx(me,{className:"w-4 h-4 mr-2"}),"Download Template"]})]})]})})]})},ns=Object.freeze(Object.defineProperty({__proto__:null,default:Sa},Symbol.toStringTag,{value:"Module"}));function La(){const[a,s]=r.useState({latitude:-6.229728,longitude:106.689431,radius_meter:50,jam_masuk:"07:00",jam_pulang:"15:30",toleransi_telat:10}),[t,o]=r.useState(!1),[l,m]=r.useState(!1),[p,c]=r.useState(null),n=r.useRef(null),f=r.useRef(null),b=r.useRef(null),_=r.useRef(0),[P,D]=r.useState(0),[T,H]=r.useState(!0),G=r.useRef({started:0,loaded:0}),F=async(d=!1)=>{o(!0);try{const x=await J.getSettings(),k=x?.data?.responseData||x?.data||{};s(j=>({...j,latitude:k.latitude??j.latitude,longitude:k.longitude??j.longitude,radius_meter:k.radius_meter??j.radius_meter,jam_masuk:k.jam_masuk?String(k.jam_masuk).slice(0,5):j.jam_masuk,jam_pulang:k.jam_pulang?String(k.jam_pulang).slice(0,5):j.jam_pulang,toleransi_telat:k.toleransi_telat??j.toleransi_telat})),d&&A.fire({icon:"success",title:"Berhasil",text:"Pengaturan berhasil direset dari server"})}catch(x){const k=x?.response?.data?.responseMessage||"Gagal memuat pengaturan dari server";d&&A.fire({icon:"error",title:"Gagal",text:k})}finally{o(!1)}},W=()=>new Promise(d=>{if(window.L)return d();const x=document.createElement("link");x.rel="stylesheet",x.href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css",x.onload=g,x.onerror=()=>{c({type:"error",message:"Gagal memuat stylesheet Leaflet."})},document.head.appendChild(x);const k=document.createElement("script");k.src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js",k.onload=g,k.onerror=()=>{c({type:"error",message:"Gagal memuat script Leaflet."}),H(!1)},document.body.appendChild(k);let j=0,y=0;function g(){if(j++,j===1&&D(L=>Math.max(L,50)),j===2){const L=setInterval(()=>{y++,window.L?(clearInterval(L),D(K=>Math.max(K,70)),d()):y>60&&(clearInterval(L),d())},50)}}}),w=async()=>{await W();const d=window.L;if(!d)return;const x=document.getElementById("map-picker");if(!x){_.current<5&&(_.current+=1,setTimeout(w,100));return}n.current&&(n.current.remove(),n.current=null),G.current={started:0,loaded:0},n.current=d.map(x).setView([a.latitude,a.longitude],17),S.current=!0,D(j=>Math.max(j,80));const k=d.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:19});k.on("tileloadstart",()=>{G.current.started+=1;const{started:j,loaded:y}=G.current,g=y/Math.max(j,1),L=80+Math.floor(g*19);D(K=>Math.max(K,Math.min(99,L)))}),k.on("tileload",()=>{G.current.loaded+=1;const{started:j,loaded:y}=G.current,g=y/Math.max(j,1),L=80+Math.floor(g*19);D(K=>Math.max(K,Math.min(99,L)))}),k.on("load",()=>{D(100),setTimeout(()=>H(!1),300)}),k.on("tileerror",()=>{const{started:j,loaded:y}=G.current,g=y/Math.max(j,1),L=80+Math.floor(g*19);D(K=>Math.max(K,Math.min(99,L))),setTimeout(()=>H(!1),800)}),k.addTo(n.current),setTimeout(()=>{T&&(D(j=>Math.max(j,95)),H(!1))},5e3),f.current=d.marker([a.latitude,a.longitude],{draggable:!0}).addTo(n.current),f.current.on("dragend",j=>{const{lat:y,lng:g}=j.target.getLatLng();s(L=>({...L,latitude:y,longitude:g})),b.current&&b.current.setLatLng([y,g])}),n.current.on("click",j=>{const{lat:y,lng:g}=j.latlng;f.current.setLatLng([y,g]),s(L=>({...L,latitude:y,longitude:g})),b.current&&b.current.setLatLng([y,g])}),b.current&&(b.current.remove(),b.current=null),b.current=d.circle([a.latitude,a.longitude],{radius:Number(a.radius_meter)||0,color:"#4A90E2",weight:2,fillColor:"#4A90E2",fillOpacity:.15}).addTo(n.current)};r.useEffect(()=>{F()},[]);const S=r.useRef(!1);r.useEffect(()=>{!t&&!S.current&&w()},[t]),r.useEffect(()=>{!n.current||!f.current||!window.L||(f.current.setLatLng([a.latitude,a.longitude]),n.current.setView([a.latitude,a.longitude],17),b.current&&b.current.setLatLng([a.latitude,a.longitude]))},[a.latitude,a.longitude]),r.useEffect(()=>{if(!n.current||!b.current)return;const d=Number(a.radius_meter)||0;b.current.setRadius(d)},[a.radius_meter]),r.useEffect(()=>()=>{n.current&&(n.current.remove(),n.current=null),f.current=null,b.current&&(b.current.remove(),b.current=null)},[]);const v=d=>{const{name:x,value:k}=d.target;s(j=>({...j,[x]:k}))},M=async()=>{o(!0);try{const d={latitude:Number(a.latitude),longitude:Number(a.longitude),radius_meter:Number(a.radius_meter),jam_masuk:a.jam_masuk,jam_pulang:a.jam_pulang,toleransi_telat:Number(a.toleransi_telat)};await J.updateSettings(d),c({type:"success",message:"Pengaturan berhasil disimpan."}),A.fire({icon:"success",title:"Berhasil",text:"Pengaturan berhasil disimpan"})}catch(d){const x=d?.response?.data?.responseMessage||"Gagal menyimpan pengaturan. Periksa API backend.";c({type:"error",message:x}),A.fire({icon:"error",title:"Gagal",text:x})}finally{o(!1),setTimeout(()=>c(null),2e3)}},$=async()=>{if(console.log("[Geolocation] Mulai proses getCurrentLocation"),l){console.log("[Geolocation] Dibatalkan karena geoLoading masih true");return}if(!navigator.geolocation){console.warn("[Geolocation] navigator.geolocation tidak tersedia",{userAgent:navigator.userAgent,location:{protocol:window.location.protocol,hostname:window.location.hostname}}),A.fire({icon:"error",title:"GPS Tidak Tersedia",text:"Browser Anda tidak mendukung geolokasi atau GPS tidak tersedia.",confirmButtonColor:"#3b82f6"});return}const d=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1",x=window.location.protocol==="https:";if(console.log("[Geolocation] Context",{isLocalhost:d,isHttps:x,protocol:window.location.protocol,hostname:window.location.hostname,existingFormCoords:{latitude:a.latitude,longitude:a.longitude}}),!x&&!d){console.warn("[Geolocation] Diblokir karena bukan HTTPS/localhost"),A.fire({icon:"warning",title:"Koneksi Tidak Aman",text:"Geolokasi memerlukan koneksi HTTPS atau localhost. Mohon akses melalui HTTPS atau localhost.",confirmButtonColor:"#3b82f6"});return}m(!0);const k=A.fire({title:"Mendapatkan Lokasi...",html:`
        <div class="text-sm text-gray-600 mb-4">
          Mohon tunggu, sedang mengambil koordinat GPS Anda.
        </div>
        <div class="text-xs text-gray-500">
          Pastikan Anda telah mengizinkan akses lokasi di browser.
        </div>
      `,allowOutsideClick:!1,allowEscapeKey:!1,showConfirmButton:!1,didOpen:()=>{A.showLoading()}});try{const j=N=>(console.log("[Geolocation] Memanggil navigator.geolocation.getCurrentPosition dengan options",N),new Promise((z,E)=>{navigator.geolocation.getCurrentPosition(z,E,N)}));let y;try{y=await j({enableHighAccuracy:!0,timeout:5e3,maximumAge:0}),console.log("[Geolocation] Berhasil (high accuracy)",{coords:{lat:y.coords.latitude,lng:y.coords.longitude,accuracy:y.coords.accuracy,altitude:y.coords.altitude,altitudeAccuracy:y.coords.altitudeAccuracy,heading:y.coords.heading,speed:y.coords.speed},timestamp:y.timestamp,source:"highAccuracy"})}catch(N){console.warn("[Geolocation] High accuracy gagal, coba low accuracy",{error:N,code:N?.code,message:N?.message}),y=await j({enableHighAccuracy:!1,timeout:1e4,maximumAge:0}),console.log("[Geolocation] Berhasil (low accuracy)",{coords:{lat:y.coords.latitude,lng:y.coords.longitude,accuracy:y.coords.accuracy,altitude:y.coords.altitude,altitudeAccuracy:y.coords.altitudeAccuracy,heading:y.coords.heading,speed:y.coords.speed},timestamp:y.timestamp,source:"lowAccuracy"})}const{latitude:g,longitude:L,accuracy:K}=y.coords;if(!g||!L||isNaN(g)||isNaN(L))throw new Error("Invalid coordinates received");console.log("[Geolocation] Koordinat diterima",{rawCoords:y.coords,usedCoords:{latitude:g,longitude:L}});const u=20,C=typeof K=="number"?K:null;if(C!==null&&C>u){if(k.close(),console.warn("[Geolocation] Akurasi di atas threshold",{accuracy:C,threshold:u}),!(await A.fire({icon:"warning",title:"Akurasi GPS Rendah",html:`
            <div class="text-sm">
              Akurasi lokasi saat ini sekitar Â±${Math.round(C)} meter.<br/>
              Titik lokasi bisa cukup jauh dari posisi sebenarnya.
            </div>
            <div class="text-xs text-gray-500 mt-3">
              Disarankan menggunakan <strong>HP (smartphone)</strong> dengan GPS aktif,<br/>
              dibandingkan laptop/PC yang biasanya hanya memakai lokasi perkiraan.
            </div>
          `,showCancelButton:!0,confirmButtonText:"Tetap Gunakan Titik Ini",cancelButtonText:"Batalkan",confirmButtonColor:"#3b82f6",cancelButtonColor:"#6b7280"})).isConfirmed){console.log("[Geolocation] Pengguna membatalkan penggunaan titik dengan akurasi rendah");return}}else k.close();if(s(N=>({...N,latitude:parseFloat(g.toFixed(6)),longitude:parseFloat(L.toFixed(6))})),n.current&&window.L){const N=window.L,z=[g,L];try{n.current.setView(z,17),f.current?f.current.setLatLng(z):(f.current=N.marker(z,{draggable:!0}).addTo(n.current),f.current.on("dragend",E=>{const O=E.target.getLatLng();s(Y=>({...Y,latitude:parseFloat(O.lat.toFixed(6)),longitude:parseFloat(O.lng.toFixed(6))}))})),b.current?(b.current.setLatLng(z),b.current.setRadius(Number(a.radius_meter)||50)):b.current=N.circle(z,{radius:Number(a.radius_meter)||50,color:"#3b82f6",weight:2,fillColor:"#3b82f6",fillOpacity:.15}).addTo(n.current)}catch(E){console.warn("Map update failed:",{error:E,newLatLng:z})}}A.fire({icon:"success",title:"Lokasi Berhasil Diambil!",html:`
          <div class="text-sm">
            <strong>Koordinat:</strong><br>
            Latitude: ${g.toFixed(6)}<br>
            Longitude: ${L.toFixed(6)}
          </div>
          <div class="text-xs text-gray-500 mt-2">
            Akurasi: Â±${Math.round(y.coords.accuracy||0)} meter
          </div>
        `,confirmButtonColor:"#3b82f6",timer:4e3,timerProgressBar:!0})}catch(j){console.error("[Geolocation] Terjadi error saat getCurrentLocation",{error:j,code:j?.code,message:j?.message,name:j?.name}),k&&k.isVisible&&k.isVisible()&&k.close();let y="Gagal mendapatkan lokasi. ",g="Gagal Mendapatkan Lokasi";if(j.code)switch(j.code){case 1:g="Akses Lokasi Ditolak",y="Mohon izinkan akses lokasi di browser Anda. Klik ikon kunci/lokasi di address bar untuk mengatur izin.";break;case 2:g="Lokasi Tidak Tersedia",y="Informasi lokasi tidak tersedia. Pastikan GPS aktif dan Anda berada di area dengan sinyal yang baik.";break;case 3:g="Waktu Tunggu Habis",y="Waktu tunggu habis. Pastikan GPS aktif dan coba lagi.";break;default:y+="Terjadi kesalahan yang tidak diketahui.";break}else y+=j.message||"Terjadi kesalahan yang tidak diketahui.";A.fire({icon:"error",title:g,text:y,confirmButtonColor:"#3b82f6",footer:"<small>Tips: Pastikan browser mengizinkan akses lokasi dan GPS aktif</small>"})}finally{m(!1)}};return t&&!n.current?e.jsx(Pe,{text:"Memuat pengaturan..."}):e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx(Be,{notification:p}),e.jsx("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Pilih Lokasi Sekolah"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{id:"map-picker",className:"w-full h-[380px] rounded-lg overflow-hidden border"}),T&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-white/80",children:e.jsxs("div",{className:"w-72 bg-white rounded-lg shadow p-4 text-center",children:[e.jsx("div",{className:"text-sm font-medium text-gray-700",children:"Memuat peta..."}),e.jsx("div",{className:"mt-2 h-2 w-full bg-gray-200 rounded",children:e.jsx("div",{className:"h-2 bg-blue-600 rounded",style:{width:`${P}%`}})}),e.jsxs("div",{className:"mt-2 text-xs text-gray-600",children:[P,"%"]})]})})]}),e.jsx("div",{className:"mt-4 flex justify-center",children:e.jsx("button",{onClick:$,disabled:t||l,className:"flex items-center gap-2 bg-green-600 hover:bg-green-700 disabled:bg-gray-400 disabled:cursor-not-allowed text-white px-6 py-3 rounded-lg text-sm font-medium transition-all duration-200 shadow-md hover:shadow-lg",children:l?e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-5 h-5 animate-spin",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Mengambil Lokasi..."]}):e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),"Gunakan Lokasi Saat Ini"]})})}),e.jsx("div",{className:"mt-2 text-center",children:e.jsx("p",{className:"text-xs text-gray-500",children:"Pastikan browser mengizinkan akses lokasi dan GPS aktif"})}),e.jsx("p",{className:"mt-3 text-sm text-gray-600",children:"Klik pada peta atau seret marker untuk mengatur lokasi. Latitude dan longitude akan terisi otomatis."}),e.jsx("p",{className:"mt-3 text-sm text-gray-600",children:"Atau pergi ke google maps dan copy paste latitude dan longitude posisi yang diinginkan secara manual."})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Konfigurasi Sistem"}),e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Latitude"}),e.jsx("input",{type:"number",step:"0.000001",name:"latitude",value:a.latitude,onChange:v,className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Longitude"}),e.jsx("input",{type:"number",step:"0.000001",name:"longitude",value:a.longitude,onChange:v,className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Radius (meter)"}),e.jsx("input",{type:"number",min:"10",name:"radius_meter",value:a.radius_meter,onChange:v,className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Batas Jam Datang"}),e.jsx("input",{type:"time",name:"jam_masuk",value:a.jam_masuk,onChange:v,className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Mulai Jam Pulang"}),e.jsx("input",{type:"time",name:"jam_pulang",value:a.jam_pulang,onChange:v,className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Toleransi Terlambat Jam Datang (menit)"}),e.jsx("input",{type:"number",min:"0",name:"toleransi_telat",value:a.toleransi_telat,onChange:v,className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]}),e.jsx("div",{className:"mt-2 ",children:e.jsx("button",{disabled:t,onClick:M,className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg text-sm font-medium disabled:opacity-50 w-full",children:"Simpan"})})]})]})]})})]})}const is=Object.freeze(Object.defineProperty({__proto__:null,default:La},Symbol.toStringTag,{value:"Module"}));export{$a as A,Ua as B,qa as C,es as D,Ba as E,as as F,he as G,Qa as H,ts as I,ns as J,rs as K,Pe as L,is as M,Be as N,Ya as P,Oa as R,Za as S,je as T,Xa as U,h as a,De as b,ne as c,ha as d,Ta as e,re as f,oe as g,Ga as h,Va as i,ye as j,za as k,ss as l,Ja as m,Wa as n,J as o,Ra as p,Ea as q,Pa as r,Ia as s,ca as t,fe as u,Da as v,ze as w,Ha as x,Ka as y,Fa as z};
